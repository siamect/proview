
<topic> __DocumentTitlePage

<image> pwr_logga.gif






<h1> Operator's Guide




















<hr>
2009-08-04
Version 5.0.0	
<hr>
</topic>

<topic> __DocumentInfoPage


Copyright 2005-2014 SSAB EMEA AB

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
Texts.



</topic>

<option> printdisable
<topic> index
Operators Guide

<image> pwr_logga.gif

<h1>Operators Guide

Introduction <link> opg_introduction
About Proview <link> opg_proview
The Operator Place <link> opg_opplace
Alarm and Events <link> opg_events
Curves <link> opg_curves
Help <link> opg_help
Navigator <link> opg_navigator
Plc Trace <link> opg_trace
Setup script <link> opg_setupfile
Users and Privileges <link> opg_security
Function Keys <link> opg_functionkeys
Status Monitor <link> opg_statusmonitor
Xtt Commands <link> help command
Script <link> script
Index	<index>
</topic>
<option> printenable

<chapter>
<topic> opg_introduction
Introduction

Proview Operator's Guide is intended for persons who will be in contact with running
Proview systems in their daily work. It could be

- operators that supervise and handle a process.
- maintenance personnel troubleshooting the plant.
- process engineer fetching information about the process.
- system managers maintaining and debugging the system.

Function for all these groups are available in the ordinary operator environment, and who
belongs to a certain group are determined from the privileges the user is granted.

</topic>
</chapter>

<chapter>
<topic> opg_proview
About Proview

<h1>What is Proview
Proview is a modern, powerful and general process control system. It contains all the
functions normally required for successful sequential control, adjustment, data
acquisition, communication, supervision, HMI/SCADA, history data storage etc.

Proview is a distributed system, it consists of a number of computers (nodes) connected
in a network. The nodes can be of type process station, operator station or storage
station.

<option> printdisable
<b>Stations <link>opg_stations
<b>Objects <link>opg_object
<option> printenable
</topic>

<headerlevel>
<topic> opg_stations
Stations

<h2>Process stations
A process station collects measuring data from different sensors and switches, it can be
analog measuring data as temperatures, flows, levels, or digital measuring data from
for example photocells or pressure switches. A control program is executed in the process 
station, that from the measuring data calculates control data for the process that is sent
out to motors and actuators affecting the process.

Process stations often contains special hardware to read input data and write output data,
but this can also be performed over the network with protocols as Modbus/TCP and Profinet.

<h2>Operator station
The operator station is the interface between the operator and the process. The operator
supervises the process with the help of process graphs, displaying the state of the process
by presenting data in the shape of bars, curves, indicators etc. The operator can influence
the process, for example by entering data into input fields or pushing buttons in the process
graph.

<h2>Storage station
Some measuring data has to be stored, in order to view trends and changes, or to be able
to get back and analyze the state of the process at a certain point of time. The storage
time can vary from hours to several years. The storage is done on storage stations, that
have sufficient disk space to be able to store data for long periods, and also have backup
functions. 

<h2>Development station
There can also be development stations on the network, where process, operator and storage
stations are configured and programmed. On the development stations there are tools to draw
process graphs, program sequences, logical schemas, control loops etc. When the 
configuration is modified for a station, the new configuration is distributed to the station
via the network.

<image>opg_fig1.png
<b>Fig Components in a Proview system
</topic>

<topic>opg_object
Objects

<h1>The object tree
Object is a central concept in Proview. Sensors, valves, motors, controllers etc. are all
represented by objects in a database. The objects are ordered in a tree structure where
different hierarchy levels in the tree represent parts of the plant or process. If we look
at a furnace, the top level can represent the whole furnace. The furnace consists of four
warming zones, which are represented by objects on the next level in the object tree. Each
zone has two electric heaters and two temperature sensors, still one level down. Here are
also some object that don't have any physical equivalent in the plant, a PID controller 
and a control program for the zone.

<image>opg_fig2.png
<b>Fig Furnace with 4 zones

<image>opg_fig3.png
<b>Fig Object tree for the furnace

Note that several objects have quite cryptic names that follow a notation standard, but to
each object there are a more detailed description that is often viewed with the object.

Let us have a closer look at an object, for example one of the temperature sensors. The
object is shown in an overview process graph with the graphical symbol of the object, a
triangle with the letter T.

<image>opg_fig4.png
<b>Fig Graphical symbol for a temperature sensor

<h2>Object graph
If you click on the symbol the object graph of the object is opened. From the object graph
you can see the properties of the object. The most interesting for a temperature sensor is
of course the measured temperature, that is viewed both in figures and as a bar 
(thermometer), see 'Fig Object graph for temperature sensor' below. The temperature sensor
object also contains four alarm limits, highhigh, high, low and lowlow. The level of the
alarm limits can be set from the graph, and also a hysteresis on the limits. With check
boxes you can also disable the alarm limits.

<image>opg_fig5.png
<b>Fig Object graph for a temperature sensor

<h2>Methods
In the upper edge of the object graph there are a number of pushbuttons that activate the
methods of the object. By the methods you can reach all the information there is on the
objects in the control system. The methods can also be activated from the menu in the 
objects graph, or by right clicking on the graphical symbol in the overview graph, opening a 
popup menu with the methods. Actually, wherever you find the object, in alarm lists, 
process graphs, in the plc code etc, you can by right clicking on the object open the popup
menu with the methods or the object. Here follows a list of different methods, but which
methods are relevant for a specific object, depends on the type of object and how it is
configured.

<b>Method <t>Description
Object Graph <t>Open the object graph.
Trend <t>Open a trend curve.
History <t>Fetch history data from a storage station and view in a curve.
Hist Event <t>View a historical list of alarms and events for the object.
Block Events <t>Block alarms and events.
Help <t>View a help text for the object.
Note <t>Write a note for the object. The note is viewed in the object graph.
Open Object <t>Show the content of the object.
RtNavigator <t>Show the object in the object tree.
Crossreferences <t>Show were the object is referenced in the plc code and process graphs.
Help Class <t>View help for this object type.
Datasheet <t>Show the datasheet for the component in the plant that corresponds
          <t>to the object.
CircuitDiagram <t>Show the circuit diagram for the object.

</topic>
</headerlevel>
</chapter>

<chapter>
<topic>opg_opplace
Operator place

<option> printdisable
<b>Start the operator environment <link>opg_startop
<b>Operator window <link>opg_opwindow
<option> printenable
</topic>

<headerlevel>
<topic> opg_startop
Start the operator environment

Usually the operator environment will be started automatically at login of the workstation.
In the login configuration, a operator place object is added to the starting command. In
the operator place object the properties of the operator place are configured.

At times though, you may want to start another way, for example from a terminal window.

The operator environment is started by the program rt_xtt, and you specify an OpPlace object
as argument. The command to start with the OpPlace object Nodes-OpgNode-b55 is

<c>> rt_xtt Nodes-OpgNode-b55

There are also a number of options that can be added to the argument list

-l <t>Language. One the following languages is specified:
   <t>en_us English (default).
   <t>sv_se Swedish.
   <t>de_de German.
   <t>fr_fr French.

-q <t>The license window is not opened at startup.
-c <t>A pushbutton to close the operator environment is shown in the operator window.
-u <t>Start with a opplace object with the same name as the current linux user.
-s <t>Displays a list of available OpPlace objects.

</topic>

<topic>opg_opwindow
The Operator Window

<image>opg_fig6.png
<b>Fig The operator window

The operator window is placed at the upper edge of the screen, and lacks title row and
pushbuttons to iconify and delete the window. It is divided in tree parts, to the left
current alarms and messages are viewed, in the middle there are pushbuttons for some base
functions, and to the left there are pushbuttons configured for this operator place.

<h2>Status bar
The top row is a status bar. It shows who is logged in on which node. For tha current
node, and for all nodes that there are node supervision configured, an indicator for system 
status is viewed. Green states that everything is all right, yellow indicates warning, red
error and flashing red fatal error. If you click on a node, the status graph for the node
is opened.

<h2>Alarms and messages
In the left part of the operator window alarm and messages are displayed.

The alarms are divided into four priority levels A, B, C and D, where A has the highest
priority and D the lowest. A alarms are marked red, B alarms yellow, C alarms blue and D
alarms violet. Furthermore there is the category Info messages that are marked with green.

In the upper field, the latest unacknowledged A alarm are displayed. Depending on the height
of the operator window, 2 to 5 alarms are viewed. There is also a button marked with a tick
to acknowledge A alarms.

In the lower field the latest unacknowledged B, C, D alarms, and info messages are viewed.
These alarms are displayed in priority order rather than in chronological order, i.e. if 
there are unacknowledged B alarms, the latest of these will be displayed. Only if there are
no acknowledged B alarms, possible C alarms are viewed etc. There is also an acknowledge
button to acknowledge the B, C, D alarms and the info messaged.

An alarm is prevailing if the alarm condition still is fulfilled. This is marked with a
warning triangle to the left of the alarm text.

<h2>Menu and pushbuttons to open base functions
In the middle part of the operator window there are a menu and some buttons to open
base functions.

<b>Menu
Below is a description of the menu items in the Functions menu.

Functions/Alarm/AlarmList <t><t>Open the alarm list with prevailing and unacknowledged alarms. <link>opg_alarmlist
Functions/Alarm/EventList <t><t>Open the event list, a list of the latest alarms and events. <link>opg_eventlist
Functions/Alarm/EventLog <t><t>Open the event log, where you can display stored events. <link>opg_eventlog
Functions/Alarm/BlockList <t><t>Open the list of blocked alarms. <link>opg_blocklist
Functions/Curves/Trends <t><t>Display a list of all trendcurves. <link>opg_trends
Functions/Curves/Fast <t><t>Display a list of all fastcurves. <link>opg_fastcurves
Functions/Curves/Process History <t><t>Display a list of process history. <link>opg_history
Functions/Process Graphics <t><t>Display a list of all process graphs, defined by
                          <t><t>XttGraph objects.
Functions/Navigator <t><t>Open the navigator. <link>opg_navigator
Functions/View/Zoom in<t><t>Increase the text size in the alarmtext.
Functions/View/Zoom out<t><t>Decrease the text size in the alarmtext.
Functions/User/Switch User <t><t>Open the login window to login as another user.
Functions/User/Show User <t><t>Show the current user.
Functions/User/Return <t><t>Return to the original user.
Functions/Help/Project <t><t>Show helptexts for the project.
Functions/Help/Overview <t><t>Show an overview of helptexts.
Functions/Help/Operator Window <t><t>Display help on the operator window.
Functions/Help/About Proview <t><t>Display Proview into, for example version of install package.
Functions/Close <t><t>Close down the operator place.

<b>Pushbuttons
Below the menu there is a tool panel with a number of pushbuttons that works as shortcuts to
menu items:

- zoom in and out.
- show helptexts for the project.
- close.
- show alarmlist.
- show eventlist.
- show eventlog.
- show list of blocked alarms.
- open the navigator.

<h2>Function buttons
To the right there are a number of pushbuttons that are used to open process graphs or 
execute various orders or commands. How these buttons are used depends of the configuration
of the operator place.

</topic>
</chapter>

<chapter>
<topic>opg_events
Alarms and Events

<option> printdisable
About alarm and events <link>opg_events_general
Alarmlist <t><t>Displays current alarms.<link>opg_alarmlist
Eventlist <t><t>Displays the latest alarms and events. <link> opg_eventlist
Eventlog <t><t>Search for alarms and events in the event database. <link> opg_eventlog
Blocklist <t><t>Displays blocked alarms and hierarchies. <link> opg_blocklist
Block alarms <link> opg_blockingwindow
<option> printenable
</topic>

<headerlevel>
<topic>opg_events_general
About alarm and events

<h1>Alarms
Alarms are sent to the operator station when something occurs that operator has to pay
attention to. It could be a temperature crossing a limit, or a bad value entered in a
process graph. In Proview there are special supervision objects that supervise signals
and generates alarms.

Alarm are viewed in the alarmlist.<link>opg_alarmlist

<h2>Priority
The alarms are grouped in four priority levels, A, B, C and D, where A is the highest
priority and D the lowest. How the priority levels are used, depends on the configuration
of the system. It is common that the alarm priorities are used in the following way.

A alarms are marked with red. They have the highest priority and indicate that a serious
error in the plant has occurred that immediately should be taken care of. Often it causes
a stop in the production as long as the alarms are prevailing.

B alarms are marked with yellow. They have a little lower priority, implying an error that
that should soon be taken care of, but the production can continue still some time.

C alarms are marked with blue and D alarms with violet. They indicates minor errors that
are not acute. In many system two alarm levels are enough, and only A and B alarms are used.

<h2>Alarmtext
Alarms contain text that is viewed in alarm and event lists. This text is in one row
and maximum 80 characters long. There is also room for longer text, a moretext, that 
for example, can contain further explanation of the cause of the alarm, or how it should
be taken care of. The moretext is displayed in the alarm and event lists if the cursor
is placed on the alarmtext.

<h2>Acknowledge
An alarm has to be acknowledged by the operator. As long as the alarm is unacknowledged, it
remains in the alarmlist and gives rise to a beep. If an alarm is displayed at several
operator places it is enough for one of the operators to acknowledges the alarm.

<h2>Blocking
If an alarm is not relevant during a period, it is possible to block the alarm. You can, 
for example, block the alarms for a part of the plant that is not in production. The
blocking can be performed on a separate alarm object, or for a hierarchy. Blocking is a
method of an object, and performed from a blocking window that is opened from the popup
menu for the object. Only users that are granted the privilege RtEvents are allowed
to block alarms.

Blocked objects are displayed in a blocklist. <link>opg_blocklist

<h2>Messages
Info messages are a group that has the same functionality as alarms. They have lower
priority than alarms and are marked with green.

<h1>Events
An event is generated in the same way as alarms, by supervision objects. Also alarms 
generates events. Activation of an alarm is counted as an event, as are the return 
of the alarm state and the acknowledgement of the alarm.

Events are stored in an eventlist, that contains the latest events. They are also stored
in the event log, where you can go back and look at events for some period of time, and 
also see event statistics. For the eventlog there is a search dialog, where you can search
for events with certain search criteria, for example time, eventtype  or eventname.

<h2>Selectlist
The operator place has a selectlist that contains a list of plant parts in the object tree.
Only alarms from these plant parts will be viewed in the alarm and event lists. The other
alarms and events are filtered away.

</topic>

<topic>opg_alarmlist
Alarmlist

<image>opg_fig7.png
<b>Fig Alarmlist
The alarmlist is opened by activating the "Alarmlist" button in the operator window. You can
also open the alarmlist from the menu in the navigator, 'Alarm/Alarm List', or by the xtt
command 'show alarmlist'.

In the alarmlist prevailing and unacknowledged alarms are viewed. Unacknowledged alarms are
marked with a bell and prevailing alarms with a warning triangle. Only alarms from the
plant parts stated in the selectlist are viewed.

The moretext of an alarm is displayed when the cursor is placed on the alarmtext.

Alarms can be acknowledged by activating Functions/Acknowledge (Ctrl+K) in the menu.

If you rightclick on an alarmtext, the methods of the alarm objects are displayed. Thus
making it easy to open the object graph or find where in the plc code the alarm is 
generated.

<image>opg_fig10.png
<b>Fig Alarmtext
</topic>

<topic>opg_eventlist
Eventlist

<image>opg_fig8.png
<b>Fig Eventlist

The eventlist is opened from the "Eventlist" button in the operator window. It can also be
opened from the navigator menu or by the command  'show eventlist'.

The events from the plant parts stated in the selectlist are displayed in the eventlist.
The maximum number of events are configured in the User object. When the maximum number
of events is reached, old events are removed when new ones arrives.

Each event indicates
- Color indication for alarm priority.
- Event type.
- Time of event.
- Event text.
- Event name (object/signal name).

The moretext for an event is viewed when the cursor is placed on the event text. If you
rightclick on the eventtext, the methods of the objects are displayed. Thus making it easy 
to open the object graph or find where in the plc code the alarm is generated.

</topic>

<topic>opg_eventlog
Eventlog

The eventlist has a limited length and displays only the latest event. All events though are
stored in a database, the eventlog. From this it is possible to look at events for a longer
period of time.

As the number of stored events often are  several thousands, you search for the events you
are interested in with different search criteria. The events matching the search critiera are
diplayed in a list.

<h1>Search criteria
The event log dialog is viewed in figure 'Eventlog' below.

<h2>Time
On the upper row you can specify a time interval of the search. State requested interval
with the optionsmenu to the right. If you select 'Time' the time interval is inserted into
the input fields.

<h2>Eventtype
An eventtype is specified. If no type is selected, all types are present in the search.

- Active <t>An alarm is activated.
- Message <t>An info message.
- Return <t>An alarm returns from active state.
- Ack <t>En alarm is acknowledged.

<h2>Priority
Search for alarms with a specific priority. If no priority is selected, the search is made
for all priorities.

<h2>Eventname
Name of the object the event is connected to. Wildcard (*) is allowed, for example F1-Z1*
will search for all events in the hierarchy F1-Z1. If no object name is supplied, all
objects are searched for.

<h2>Eventtext
Search for an event text. Wildcard (*) is allowed. If no text is specified, all texts are
searched for.

When the search criteria are stated, the 'Search' pushbutton is pressed. The search is 
performed and the result is presented in a list in the lower part of the window.

<image>opg_fig9.png
<b>Fig Eventlog

In the list of events an event is displayed with

- Priority <t>The priority is marked with color and a letter.
- Eventtype <t>Active is marked with an exclamation mark, Return with an crossed-out 
  <t>exclamation mark and Ack with a tick.
- Eventtext
- Eventname

If you rightclick on a row the methods of the eventname object are displayed.
</topic>

<topic>opg_blocklist
Blocklist

<image>opg_fig12.png
<b>Fig Blocklist

The list of blocked alarms is opened from the menu in the navigator, Alarm/Blocket Alarms,
or by the xtt command 'show blocklist'.

For each blocked objects are displayed:
- Color indicating the blocked priority level.
- Object name.
- User that has made the blocking.

A blocking is removed by selecting the blocking and activating Functions/Remove Blocking in 
the menu.

Alarm blocking is performed by the 'Block Events' method for an object. <link>opg_blockingwindow


</topic>

<topic>opg_blockingwindow
Alarm blocking

<image>opg_fig11.png
<b>Fig Dialog for alarm blocking

Alarm blocking is activated by the 'Block Events' method, i.e. from the popup menu for an
object, or with the xtt command 'eventlist block'.

The window is used to block alarms for an object. All alarms with the specified priority,
and with lower priorities, are blocked for the object and all its descendants.

The priority is specified by radio buttons. You can also remove blocking by the 
'No Blocking' button.

Only users with the privilege 'RtEvent' or 'System' are authorized to block alarms.
</topic>

</headerlevel>
</chapter>

<chapter>
<topic> opg_curves
Curves

<option> printdisable
Trends <link> opg_trends
Fastcurves <link> opg_fastcurves
Process history <link> opg_history
<option> printenable
</topic>

<headerlevel>
<topic> opg_trends
Trends

Trendcurves are opened from the 'Trend' method in for example the popup menu. They can
also be opened by the Xtt command 'open trend'. Trend curves are configured by DsTrend
objects and, if several curves are viewed in the same curve window, by PlotGroup objects.

A trendcurve is a signal value, for example of type temperature, pressure or flow, that
is stored with a specific time interval. A trendcurve can store 478 values, and so the 
total time window depends on the time resolution. If a new value is stored every second,
a total of 8 minutes can be stored, and with a new value every minute, eight hours can be 
stored. The values are stored in the RAM memory, and will be lost at a reboot.

The trendcurves are viewed in a curve window. A curve window can display 20 different 
curves.

<image> opg_fig31.png
<b>Fig Trendcurves

The upper part of the curve window views a table over the curves. The first column is
a color indication to identify the corresponding curve.

Description of columns in the table

View <t>A checkbox from which you can choose to view or hide the curve.
Cursor <t>Shows the curve value where the cursor is placed.
Mark <t>Shows the curve value where the marker is placed.
Unit <t>Displays the unit of the curve.
Scale <t>From 'Scale' you can change the scale in y direction (Scale on
      <t>the Time axis row changes in x direction).
Attribute <t>States the attribute of the trend curve.

<h2>Navigation
The tool panel contains buttons to zoom and move the view to the left or to the right.

You can also navigate with the navigation window in the lower part of the window. The part
of the curve that is displayed, is marked with a black square. With drag MB1 you kan move
the view in x direction, and by dragging the middle button you can zoom in and out.

Navigation from the keyboard is accomplished with the arrow keys. With arrow up and down
the zoom factor is changed, and arrow left and right moves the view to the left and to the
right.
</topic>

<topic> opg_fastcurves
Fastcurves

Fastcurves are opened from the 'Fast' method in for example the popup menu. They can
also be opened by the Xtt command 'open fast'. Fastcurves are configured by DsFastCurve
objects and, if several curves are viewed in the same windows, by PlotGroup objects.

Fastcurves are used to display fast sequences during a shorter period of time. The 
storage of the fastcurve is started by a trigger signal and continues a specific time. When 
the sequence is finished the curve is viewed, and remains on the screen until the 
trigger signal is set again to activate a new recording of the sequence.

The fastcurves are viewed in a curve window. A curve window can display 20 different 
curves.

<image> opg_fig37.png
<b>Fig Fastcurve

</topic>

<topic> opg_history
Process history


Process history is opened from the 'History' method in for example the popup menu. It can
also be opened by the Xtt command 'open history'. The history is configured by SevHist 
objects.

Process history means that the value of a signal, for example of type temperature, pressure
or flow, is stored in a database with a specific frequency during a period of time.
The history can extend over several years and the number of values for one signal can
reach several millions.

<image> opg_fig34.png
<b>Fig Process history

In the upper part of the curve window views a table over the curves. The first column is
a color indication to identify the corresponding curve.

Description of columns in the table

View <t>A checkbox from which you can choose to view or hide the curve.
Cursor <t>Shows the curve value where the cursor is placed.
Mark <t>Shows the curve value where the marker i placed.
Unit <t>Displays the unit of the curve.
Scale <t>From 'Scale' you can change the scale i y direction (Scale on
      <t>the Time axis row changes i x direction).
Attribute <t>States the attribute of the trend curve.

<h2>Navigation
The tool panel contains buttons to zoom and move the view to the left or to the right.

You can also navigate with the navigation window in the lower part of the window. The part
of the curve that is displayed, is marked with a black square. With drag MB1 you can move
the view in x direction, and by dragging the middle button you can zoom in and out.

Navigation from the keyboard is accomplished with the arrow keys. With arrow up and down
the zoom factor is changed, and arrow left and right moves the view to the left and to the
right.

<h2>Resolution
As the number of values for an attribute can reach several millions, only a fraction of the
values are viewed in the curve. When first opening the curve, the whole time range is 
viewed with a couple of hundred points. To gain higher resolution you use the arrow up
and arrow down buttons in the tool panel. Arrow up will zoom in and increase the resolution,
i.e. new values are fetched in a smaller time interval. Arrow down will zoom out and 
decrease the resolution.

</topic>
</headerlevel>
</chapter>

<chapter>
<topic> opg_help
Help window

<h1>Getting help
The help function can be opened in a number of different ways.

<h2>Operator window
In the middle part of the operator window there is a help button that opens the help texts
for the project.

<h2>The Navigator menu
The menu entry Help/Overview gives help on Proview and the operator environment. 
Help/Project gives help on the project.

<h2>Command
A help text is opened by the Xtt command 'help'. To help you add the topic you are
interested in. The command 'help help' shows for example how you use help.

<h2>Object methods
For an object there are two help methods.
- Help, views help for the object or plant part.
- Help Class, views information about the object class.

<h2>Help and info buttons in process graphs
Pushbuttons in process graphs can be connected to helptexts. These are usually marked
with a question mark or an 'I'.
<image> opg_fig36.png
<b>Fig Help buttons

<h1>Navigate in the help text
Rows with links are marked with an arrow in the left edge of the row.
The first row is a link to the previous topic.

<h2>Navigate from the keyboard
With PageUp and PageDown you can scroll up and down in the text.
Links are followed by selecting the link row with the arrow up and down keys, and then
press arrow right.
Arrow left returns to the previous page.

Ctrl+N views the next topic, and Ctrl+P the previous topic. Ctrl+A returns to the start
page.

<h2>Navigate with the mouse
To follow a link, click on the arrow, or double click on the row.
By clicking on the arrow in the first row, you return to the previous page.

<image> opg_fig35.png
<b>Fig Help window

</topic>
</chapter>

<chapter>
<topic> opg_navigator
Navigator

The navigator, also called Xtt, is started from the 'Navigator' button in the operator 
window. It can also be started as a separate program, independent of the operator 
environment. This is useful at maintenance or troubleshooting of the system. You then start
from a terminal window, see section 3.1.

<image> opg_fig14.png
<b>Fig The navigator menu

The figure above shows the navigator menu. The upper map, 'This Project' in configurable
and can contain a map structure that is specific for the project, and by default it is
missing. The other maps though are always present.

Database <t><t>Shows the object tree and the objects in the database.<link>opg_nav_database
Alarm / Alarm List <t><t>Opens the alarm list. <link>opg_alarmlist
Alarm / Event List <t><t>Opens the event list. <link>opg_eventlist
Alarm / Blocked Alarms <t><t>Shows the list of blocked alarms. <link>opg_blocklist
Alarm / Historical List <t><t>Shows the event log.<link>opg_eventlog
Store <t><t>Shows stored collection views.
System / Nethandler / Link <t><t>Shows links to other Proview systems. <link>opg_nav_link
System / Nethandler / Subscription Client <t><t>Shows subscriptions (client). <link>opg_nav_subcli
System / Nethandler / Subscription Server <t><t>Shows subscriptions (server). <link>opg_nav_subsrv
System / Communication / RemNode <t><t>Shows remote communication (nodes). <link>opg_nav_remnode
System / Communication / RemTrans <t><t>Shows remote communication (transactions). <link>opg_nav_remtrans
System / Device <t><t>Shows I/O devices. <link>opg_nav_device
System / PlcThread <t><t>Shows Plc threads. <link>opg_nav_thread
System / PlcPgm <t><t>Shows PlcPgm objects. <link>opg_nav_plcpgm
System / Logging <t><t>Dialog to start logging of data. <link>opg_nav_logging
System / System Messages <t><t>Views system messages. <link>opg_nav_systemmsg
System / System Status <t><t>Views system status for the node.<link>opg_nav_systemsts
System / Nodes <t><t>Shows the status graph for nodes. <link>opg_nav_nodes
System / Volumes <t><t>Shows loaded volumes. <link>opg_nav_volumes
Close <t><t>Close the navigator.

<h1>Navigate
<h2>Navigate from the keyboard
The most ergonomic way to navigate in the map structure is to use the arrow keys. With
Arrow Up and Arrow Down you select a map or a leaf. With Arrow Right you open a map and
with Arrow Left you close.

An object in the database is opened by Shift Arrow Right, i.e. you first press the Shift
button and keep it down while pressing the Arrow Right key. If the object doesn't have
any children, it is enough to press Arrow Left.

If you have the privilege RtWrite it is possible to change attribute values in the database.
By opening an object, selecting an attribute and pressing Arrow Right, an input field is
opened where a new value can be entered. 

<h2>Navigate with the mouse
Of course you can also navigate with the mouse. A map is opened by clicking on the map
(or doubleclicking on the text). Then you close by clicking on the map again.

An object in the database is opened by pressing the Shift key and click on the map/leaf
for the object.

<h1>Commands
From Functions/Command in the menu, or Ctrl+B, a command prompt is opened in the bottom row
of the navigator. Here you can enter commands and execute scripts. Available commands are
described in the chapter Commands and script in the chapter Script.

<option> printdisable
Commands <link>help command
Script <link> script
<option> printenable

<h1>Collection view
By Functions/Collect/Show, Ctrl+N, you look at collected objects and attributes. For trouble
shooting you often need to look at a number of different attributes simultaneously. By
traversing the object tree and collecting attributes with Functions/Collect/Insert, Ctrl+V, 
and then activating Functions/Collect/Show these attributes are viewed on one page.

A collection view can be saved to a later session by the 'save' command. To save a 
collection view with the name 'mycollection' you write the command

<c>> save/collect mycollection

<image> opg_fig15.png
<b>Fig A collection view stored with the name 'mycollection'

The name can be found in the 'Store' map, and can also be restored by the command

<c>> @mycollection

<h2>Collection window
A collection view can be copied to a separate window with Functions/Collect/Copy To Window.
Also an empty window can be created from Functions/Collect/New Window. New attributes are 
added to the window by selecting the attribute in the runtime navigator, then selecting the
collection window and activating Edit/Insert (Ctrl+V). With Shift+ArrowUp and 
Shift+ArrowDown attributes can be moved up and down in the window.

A collection window is saved from File/Save (Ctrl+S) with a specified name. It can later 
be opened from Functions/Collect/Open in the runtime navigator, or File/Open in an 
collection window. The desired window is opened from a list containing all saved collection
windows.

</topic>

<headerlevel>
<topic> opg_nav_database
Database

<image> opg_fig13.png
<b>Fig The object tree from the navigator

Under the map 'Database' the object tree is shown. Here you can navigate in the object 
three, open objects and examine the content of different attributes in the object. If
you have privileges, you can also change attribute values.

If you rightclick on an object, an popup menu with the object methods is opened. Buttons
to activate the methods of the objects are also found in the lower tool panel in the
navigator. Only methods that are valid for an object are sensitive.

<image> opg_fig16.png
<b>Fig Methods can be activated both from the tool panel and the popup menu
</topic>

<topic> opg_nav_link
System / Nethandler / Link
The map 'System / Nethandler / Link' shows links to other Proview stations. The current
station is also viewed in the list.

In the figure below you can see that the local node aristotle has contact with the node
pwrutv.

<image> opg_fig17.png
<b>Fig Links to other nodes

Description of the columns in the table

Node <t>Nodename
Os <t>Operating system and hardware for the node.
Link <t>Link status. Can be Up, Active, Connected, Down or Local.
UpCount <t>The number of times the link is established.
TimeUp <t>Time for the last establishment of the link.

</topic>

<topic> opg_nav_subcli
System / Nethandler / Subscription Client

Shows the subscriptions the current node has to other stations.

When an operator station displays data from process stations in an process graph, a 
subscription on each data viewed in the graph is created. This implies that the process
stations at regular intervals sends new data to the operator stations, which updates the
process graph with the new data.

If there is a field in a process graph that is not updated. you can enter the Subscription
Client table to see if the subscription is present and if it is updated. Each time new data
arrives for a subscription, 'Count' increments and the time is inserted in 'Time'.

In 'Unknown' on the top row, you can see the number of subscriptions where the attribute
is unknown. This can be a subscription to a station that is not yet running, but it can
also be a subscription that is misspelled, or to objects that no longer exist.

<image> opg_fig19.png
<b>Fig Subscription client

Description of the columns

Subid <t>The subscription identity.
Time <t>Latest arrival of subscription data.
Count <t>Number of times data has been received.
Node <t>Node sending subscription data.
Size <t>Size in bytes of subscription data.
Attribute <t>Database attribute for the subscription.
</topic>

<topic> opg_nav_subsrv
System / Nethandler / Subscription Server

The list shows subscriptions other stations have requested from the current node, i.e.
subscription sent cyclically from the current node to other nodes, usually from  process
stations to operator stations.

<image> opg_fig18.png
<b>Fig Subscription server

Description of the columns

Subid <t>The subscription identity.
Count <t>Number of times data has been sent.
Node <t>Node to whom subscription data is sent.
Size <t>Size in bytes of subscription data.
Offset <t>Offset in the object from where data is fetched.
Attribute <t>Database attribute for the subscription.

</topic>

<topic> opg_nav_remnode
System / Communication / RemNode

Displays a list of nodes that the current node communicates with via Remote.

Remote is a function to send data between nodes. Nodes communicating with each other are
configured by RemNode objects, and a transaction sent between two nodes by the Remote 
function are configured by RemTrans objects. A number of different protocols for the 
data exchange are supported, Modbus, MQ, Serial, TCP, UDP, 3964R and ALCM.

<image> opg_fig20.png
<b>Fig List of RemNodes

Description of the columns

RemNode <t>Name of the RemNode object, only the two last name segments are displayed.
Type <t>Type of communication, Modbus, MQ, Serial, TCP, UDP, 3964R or ALCM.
Description <t>Optional description.

By selecting a RemNode and pressing the Arrow Right key, the RemTrans objects for the
node are viewed (you can also click on the map).
By Shift/Arrow Right the RemNode object is opened.

</topic>

<topic> opg_nav_remtrans
System / Communication / RemTrans

Shows a list of all RemTrans objects.

A RemTrans object specifies a transaction sent between two node by the Remote function.
The transaction implies that the current node receives or sends data.

<image> opg_fig21.png
<b>Fig List of RemTrans-objecs

Description of the columns

RemTrans <t>Name of the RemTrans object, only the two last name segments are shown.
DataValid <t>States that data that is not yet sent is present (when sending) or
          <t>that received data that has not been taken care of is present.
Direction <t>Direction of the transaction, Snd (send) or Rcv (receive).
TransCnt <t>Number of sent or received transactions.
TransTime <t>Time for the last transaction.
ErrCount <t>Number of unsuccessful transactions.
LastSts <t>Status for the last transaction.

By selecting a transaction and pressing the Arrow Right key, the content of the transaction
is viewed (you can also click on the map). If the attribute StructFile is supplied with
the include file containing the data structures for the transactions, the data content is
viewed in this format.
By Shift/Arrow Right the RemTrans object is opened.
</topic>

<topic> opg_nav_device
System / Device

Shows a list of I/O devices.

The I/O system in Proview is divided into four levels, agent, rack, card and channel.
In the device list, all the card objects are displayed.

<image> opg_fig22.png
<b>Fig List of I/O units

Description of the columns

Device <t>Name of device object. Only the two last name segments are viewed.
Class <t>Card object class.
ErrorCount <t>Counter for read or write failures.
Process <t>Process handling the card. 1: plc, 2 io_comm.
PlcThread <t>Plc thread handling the card.
Address <t>Address configured for the card.

By selecting a device and press the Arrow Right key the channels of the device are 
displayed (you can also click on the leaf).

</topic>

<topic> opg_nav_thread
System / PlcThread

Displays a list of threads in the plc program.

Different plc programs are running with different priority and cycletime. They are 
connected to PlcThread objects that determines the priority and cycletime for the
execution.

<image> opg_fig23.png
<b>Fig List of plc threads.

Description of the columns

PlcThread <t>Name of thread object.
Prio <t>Thread priority.
LoopCnt <t>Counter of number of cycles since Proview startup.
ScanTime <t>Configured cycletime.
Mean <t>Meanvalue of measured cycletime.
Coverage <t>The execution time for the thread in proportion to the cycletime in percent.
Count 1/8 <t>Number of cycles where the execution time is less than 1/8 of the cycle 
          <t>time.
Count 1/4 <t>Number of cycles where the execution time is less than 1/4 of the cycle 
          <t>time and larger than 1/8.
Count 1/2 <t>Number of cycles where the execution time is less than 1/2 of the cycle 
          <t>time and larger than 1/4.
Count 1/1 <t>Number of cycles where the execution time is less than the cycle 
          <t>time and larger than half the cycletime.
</topic>

<topic> opg_nav_plcpgm
System / PlcPgm

Displays a list of all PlcPgm objects.

A PlcPgm object contains plc code controlling a plant part, or executing other types of
calculations. The PlcPgm object is connected to a thread object specifying the priority
and cycletime.

<image> opg_fig24.png
<b>Fig List of PlcPgm objects

Description of the columns

PlcPgm <t>Name of PlcPgm object.
PlcThread <t>Plc thread the object is connected to.
Description <t>Optional description.

PlcTrace for a PlcPgm is opened by selecting the PlcPgm object and press Ctrl+L. 
Arrow Right key will display all the windows in the plc program.

</topic>

<topic> opg_nav_logging
System / Logging

With the logging function it is possible to log signals and values in the database to
a text file. The content of the textfile can be viewed in a curve window, or imported
into for example Calc or Excel.

Maximum 100 attributes can be logged in one logfile, and there are 10 entries, where each 
entry handles one logfile.


Start the logging

- Collect the attributes that are to be logged, into the collection view, for example by
  finding and selecting the attributes in the database and press Ctrl+V.

- Check with Ctrl+N that the correct attributes are present in the collection view.

<image> opg_fig25.png
<b>Fig Attributes collected in the collection view

- Open Logging entry 1 (System / Logging / Logging Entry 1).

- Click on the 'Insert' button, The attributes are now transferred from the collection view
  to the list of attributes in the logging entry.

- Specify cycle time in ms, and filename if needed.

- Start the logging by clicking on the 'Start' button.

<image> opg_fig26.png
<b>Fig Logging entry with logging started

- When the logging is complete, you click on the 'Stop' button. Note that you must not
terminate the navigator during the period of time the logging is active. Though you can
leave the loggentry page.

- Look at the logging result in the curve window by activating 'ShowFile'.

<image> opg_fig27.png
<b>Fig Logging viewed as a curve

There are two types of logging. Either the value of the attributes are logged continuously
with a certain frequency (continuous logging), or an attribute is logged every time its
value is changed (event triggered logging).

<h2>Continuous logging
The values of the attributes in the entry are logged every cycle. In the file, also the time
since the logging started is written. The file can be viewed in the Xtt curve window
from 'ShowFile' or imported into a spreadsheet program.

<h2>Event triggered logging
An attribute in the entry is logged if the value of the attribute is changed. Into the
logfile the time of the change, and the new value is written. This type of logging can
not be viewed from 'ShowFile'.

<h2>Buffer
The logging is first written into an intern buffer. When the buffer is full it is written
to file. At fast time critical sequences, you can increase the buffer size to avoid
interruption when the buffer i written to file.

<h2>Conditional logging
In 'Condition' a digital attribute controlling the logging can be specified. The
logging is only performed when the ConditionParameter is true.

It is also possible to insert an expression into 'Condition'. The expression starts with
'expr' followed by the condition enclosed with parenthesis. In the expression, attribute values
can be fetched with the GetA function for analog attributes, GetD function for digital
attributes and GetI function for integer attribute.

<b>Expression example
expr( GetD("H1-H2-Dv1.ActualValue") && GetA("H1-H2-Av2.ActualValue") > 2.5)

The logging is performed when the Dv 'H1-H2-Dv1' is true and the Av 'H1-H2-Av2' is
larger than 2.5.

<h2>Store
The logging configuration is stored with the 'Store' button, and can be restored later
with the 'Restore' button.
</topic>

<topic> opg_nav_systemmsg
System / System Messages

The Proview system logg contains information, warning and error messages, written by the
server processes of the system. Also applications can write to the system log by using
the errh interface.

Messages in the loggfile has different degrees of severity. The severity is marked with
a letter and color:

F <t>red <t>Fatal, the most serious type of error message.
E <t>red <t>Error. 
W <t>yellow <t>Warning.
I <t>green <t>Information.
S <t>green <t>Success.

Also the Proview startup is marked with a yellow colored row.

Above all you should notice red messages implying something is wrong in the system.

<image> opg_fig28.png
<b>Fig System log
</topic>

<topic> opg_nav_systemsts
System / System Status

The system status displays a list of nodes in the system, and by opening a node the
status graph for the node is shown.

The most interesting in the graph is the SystemStatus. This is an indication of the 
condition of the system. If system status is green, its OK, if it is yellow or red, 
something is wrong in the system.

The color markings has the same severity as in the System log above, i.e.

F <t>flashing red <t>Fatal.
E <t>red <t>Error. 
W <t>yellow <t>Warning.
I <t>green<t>Information.
S <t>green <t>Success.
  <t>gray <t>Null status. The function is not activated.

The system status is a summary status for the system and application processes. Below
system status there is a list of all these processes, and the status for each process
is displayed. Furthermore is the latest or most severe system message in the system log
from the processes are displayed.

If the system status is for example yellow, this implies that some system or application
process has a yellow status. Usually by reading the status text and look in the system log
is is possible to figure out what the error is.

rt_ini <t>Initialization <t>Startup process starting the system. Also handles the system log.
rt_qmon <t>QCom monitor <t>Handles the communication with other nodes.
rt_neth <t>Nethandler <t>Handles exchanged of database information between nodes.
rt_neth_acp <t><t>Utility process for the nethandler.
rt_io <t>I/O <t>Process for I/O handling that is asynchronous with the plc program.
rt_tmon <t>Timer monitor <t>Handles sending of subscriptions.
rt_emon <t>Event monitor <t>Handles alarms and events.
rt_bck <t>Backup process <t>Handles backup of attributes and objects.
rt_linksup <t>Link supervision <t>Supervision of links to other nodes.
rt_trend <t>Trend process <t>Handles storing of trend curves.
rt_fast  <t>Fast process <t>Handles storing of fast curves.
rt_elog  <t>Event log process <t>Logging of events.
rt_webmon <t>Web monitor <t>Supplies the web interface with database information.
rt_webmonmh <t>Web mh monitor <t>Supplies the web interface with alarms and events.
rt_sysmon <t>System monitor <t>Supervises the system.
plc <t>Plc process <t>Handles I/O and executes the plc code.
rs_remote <t>Remote process <t>Handles remote communication.
opc_server <t>Opc server process <t>Handles Opc server communication.
rt_statussrv <t>Status server <t>Webservice for the runtime monitor and supervision center.
rt_post  <t>Post server <t>Sends alarms via email or sms.
rt_report  <t>Report server <t>Generates reports.
rt_sevhistmon <t>Storage monitor <t>Collects and sends process history data to storage server.
rt_powerlink <t>Ethernet powerlink server <t>Handles Powerlink communication.
</topic>

<topic> opg_nav_volumes
System / Volumes

Displays the loaded volumes.
For each volume is viewed: name, class, version and an letter combination LCM where L
means loaded, C cached and M mounted.

<image> opg_fig30.png
<b>Fig Loaded volumes
</topic>
</headerlevel>
</chapter>

<chapter>
<topic> opg_trace
Plc trace

Plc trace is a tool to study and debug the plc code.
Trace is opened from the method 'Open Plc', or from a crossreference in the Plc code.
You can also open trace by selecting a PlcPgm in the navigator and activate
'Functions/OpenProgram' (Ctrl+L) in the menu.

To the left there are a navigation window where the displayed area is marked with a 
square. By moving the square with drag MB1 you move the displayed area. You can also
zoom by dragging with the middle button.

Digital objects with height status are marked with red in the code.

<image> opg_fig32.png
<b>Fig Plc Trace

You can look at the value of analog or digital outputs by creating so called analyze nodes.
They are created by dragging with the middle button from the output pin.

A set of analyze nodes can be stored and restored by 'File/Save Trace' and 
'File/Restore Trace' in the menu.

When rightclicking on an object the methods of the objects are displayed. A very useful
method in this context is crossreferences, The crossreferences are also displayed when
doubleclicking on the object.

<h1>Crossreferences

The crossreferences are a list of the places an object or attribute occur in the code or
in process graphs. If the reference implies reading the value, it is marked with a book,
if it implies writing the value, it is marked with a pen. Reading can be that the value
is displayed in a graph or fetched in the plc code. A write reference can be a pushbutton
in a graph or a Set or Sto object in the plc code.

<image> opg_fig33.png
<b>Fig Crossreferences

By rightclicking on the crossreference, the plc or process graph the reference is pointing
at is opened. On plc references you can open PlcTrace with doubleclick. When Plc Trace is 
opened the reference is marked and centered.

<h1>Debugging with Plc Trace and Crossreferences

Plc Trace and Crossreferences are a very efficient tool for troubleshooting.
A troubleshooting often starts out from an alarm or error indication in a process graph.
By activating the methods 'Crossreferences' or 'Open Plc' you find the place or places in
the code where the object is written. By analysing the code you conclude which signal
is missing, open the crossreferences for this and open PlcTrace where it is written. In 
this way you can search in the code and finally find the cause of the problem.

<h1>Simulation
At simulation, i.e. when testing a system without the I/O system, you can set PlcTrace
in simulate mode with 'Mode/Simulate' in the menu. In simulate mode you can toggle 
digital signals by clicking with Ctrl/Shift MB1 on them in the Plc Trace window.

</topic>
</chapter>

<chapter>
<topic> opg_setupfile
Setup script

A setup script can be created on the home directory with the name 

<c>xtt_setup.rtt_com


This will be executed when the operator environment (or Xtt) is started, and can
contain script statements and xtt commands.

Here are some examples of useable commands.

<b>Open a graph

<c>   open graph my_graph

<b>Create a maintenance menu in the navigator

<c>   create item/text="Maintenance"/menu/destination="DataBase"/before <LINK> create item
<c>   create item/text="My graph"/command="open graph my_graph"/pixmap=graph
<c>           /dest=Maintenance/first

<b>Remove menu items from the standarde menu of the navigator

<c>   delete item /name=close <LINK> delete item
<c>   delete item /name=system-nethandler

<b>Short command for an hierarchy in the database

<c>   define rb9 "show children /name=hql-rb9" <LINK> define

<b>Short command for a graph

<c>   define my_graph "open graph my_graph"
</topic>

<headerlevel>
<topic> opg_symbol
Symbol

An xtt symbol can be used as a short command or a variable in a command.
If the symbol is used as a variable in a command in should be surrounded
by apostrophes.

Symbols are created by the define command. <link> define

Example of a symbol used as a short command

<c>xtt> define p1 "show child/name=hql-hvk-pumpar-pump1"
<c>xtt> p1

Example of a symbol used as a variable

<c>xtt> define p1 hql-hvk-pumpar-StartPump1
<c>xtt> open trace 'p1'

</topic>
</headerlevel>
</chapter>

<chapter>
<topic> opg_security
Users and privileges

Proview contains a system with users that are granted privileges. To perform specific tasks
certain privileges are needed, and only if the user has this privileges he is allowed
to perform them.

The following privileges are used in the operator environment:

RtRead	<t>Read authority in runtime.
RtWrite <t>Write authority in runtime. Authorized to change values of attributes from the
        <t>navigator.
RtEvents <t>Privilege to handle alarm and event.
System  <t>System manager privilege. Authorized for most things.
Maintenance <t>Privilege for maintenance personnel.
Process <t>Privilege for process engineer.
Instrument <t>Privilege for instrument technician.
Operator1 <t>Privilegie for operator.
Operator2 <t>Privilegie for operator.
Operator3 <t>Privilegie for operator.
Operator4 <t>Privilegie for operator.
Operator5 <t>Privilegie for operator.
Operator6 <t>Privilegie for operator.
Operator7 <t>Privilegie for operator.
Operator8 <t>Privilegie for operator.
Operator9 <t>Privilegie for operator.
Operator10 <t>Privilegie for operator.

<h1>Users
When the operator environment or Xtt is started, you login either as a user, or you
are assigned the default privileges stated in the Security object.

If the startup is made with an OpPlace object, the user is fetched from the UserName 
attribute in the User object. If a user is missing or invalid an login window is opened
and the user has to login with username and password.

If Xtt is started without OpPlace object, the privileges are fetched from the attribute
DefaultXttPriv in the Security object. If there are no privileges that gives read
authority, the login window is opened.

<b>Navigator
To make changes in the database from the navigator, RtWrite or System privileges are
required. This is also valid for the command 'set parameter'.

<b>Plc Trace
To make changes in the database from PlcTrace in simulate mode, RtWrite or System are
required.

<b>Object graphs
Generally the privileges RtWrite or System are required to make changes in the database
from an object graph. There are though some exceptions. In ChanAi and ChanAo also 
Instrument has authority to change signal ranges, and to set an Ao in test mode. In the
PID and Mode graphs, Process are authorized to change beside RtWrite and System. In the 
Mode graph you can furthermore control the authority by opening the graph with the
command 'open graph' and use the /access option.

<b>Process graphs
In the process graphs the designer chooses for each input field or pushbutton which
privileges are required to make a change.
</topic>
</chapter>

<chapter>
<topic> opg_functionkeys
Function keys

You can use the function keys as shortcuts to open graphs or influence objects in the
database.

<h1>Function calls
The following functions can be called when an function key is pressed.

<h2>SetDig()
Sets an attribute of type Boolean. The name of the attribute is specified as argument.

<h2>ResDig()
Resets an attribute of type Boolean. The name of the attribute is specified as argument.

<h2>ToggleDig()
Toggles an attribute of type Boolean. The name of the attribute is specified as argument.

<h2>Command()
Executes a Xtt command. The command is specified as an argument.

<h1>Setup file
The connection between the keys and the functions is specified in the file Rt_Xtt on the
login directory. In the file there are one row for each key. On the row i written
- Possible modifiers (Shift, Control or Alt).
- <Key> followed by the name of the key, e.g. <Key>F7 or <Key>m.
- a colon followed by the function that is to be called with arguments.

A '#' sign in the first position denotes a comment.

<b>Example

<c>#
<c># Configuration of Global function keys
<c>     <Key>F5: Command(event ack /prio=A)
<c>     <Key>F6: Command(event ack /prio=NOA)
<c>     <Key>F7: Command(show alarm)
<c>     <Key>F8: Command(show event)
<c>     <Key>F9: Command(close all/except=navigator)
<c>     Shift Control <Key>m: SetDig(F1-Start.ActualValue)
<c>     Shift Control <Key>n: SetDig(F1-Stop.ActualValue)
<c>     Shift Alt <Key>n: SetDig(F1-Reset.ActualValue)

</topic>
</chapter>

<chapter>
<topic> opg_statusmonitor
Status Monitor

The Status Monitor is a tool to supervise and handle process- and operator
stations. You add nodes that you want to supervise and the statusmonitor views
status for the node, with color indication and status text.

<image> opg_fig38.png
<b>Fig The Status Monitor

<h1>Add and remove nodes

<image> opg_fig41.png
<b>Fig Adding of a node

<image> opg_fig39.png
<b>Fig Node info

<image> opg_fig40.png
<b>Fig Process status for a node

</topic>
</chapter>

<chapter>
<TOPIC> help command
Xtt commands

add parameter<t>Add an attribute to a picture 	<LINK> add parameter
add menu    <t>Add a menu item to a xtt menu  	<LINK> add menu
call method <t>Call a xtt method for an object 	<LINK> call method
check method <t>Call a xtt method filter for an object <LINK> check method
collect     <t>Add an attribute to collect list <LINK> collect
collect show<t>Show the collect list		<LINK> collect show
collect clear<t>Clear the collect list		<LINK> collect clear
collect remove<t>Remove an attribute from the collect list <LINK> collect remove
collect open<t>Open a stored collect window	<LINK> collect open
close alarmlist <t>Close alarmlist		<LINK> close alarmlist
close eventlist <t>Close eventlist		<LINK> close eventlist
close graph <t>Close a graph			<LINK> close graph
close multiview <t>Close a multiview		<LINK> close multiview
close navigator <t>Close the navigator		<LINK> close navigator
create item <t>Create a menu item in the Xtt menu <LINK> create item
create opmenuitem <t>Create a menu item in the operator window menu <LINK> create opmenuitem
crossreference<t>Show crossreferenses		<LINK> crossreference
define      <t>Define a symbol			<LINK> define
delete item <t>Delete a menu item in the Xtt menu <LINK> delete item
delete opmenuitem <t>Delete a menu item in the operator window menu <LINK> delete opmenuitem
eventlist    <t>Handle the eventlist		<LINK> eventlist
exit        <t>close xtt			<LINK> exit
help        <t>Display help			<LINK> help
login       <t>User login			<LINK> login
logout      <t>User logout			<LINK> logout
logging     <t>Logg attributes to file		<LINK> logging
open	    <t>Open various windows		<LINK> open
read object <t>Read the content of an object from file <LINK> read object
search	<t>Search for an object or a string 	<LINK> search
set advanceduser<t>Set advanced user		<LINK> set advanceduser
set display<t>Set format of display for selected attribute <LINK> set display
set folder  <t>Set a folder in a tabbed window. <LINK> set folder
set parameter<t>Set the value of an attribute  	<LINK> set parameter
set subwindow<t>View a graph in a Ge window object.  <LINK> set subwindow
setup       <t>Xtt setup			<LINK> setup
show version<t>Show xtt version			<LINK> show version
show symbol <t>Show a symbol			<LINK> show symbol
show plcpgm <t>Show PlcPgm objects		<LINK> show plcpgm
show plcthreads<t>Show PlcThread objects	<LINK> show plcthreads
show links  <t>Show links			<LINK> show links
show logfiles<t>Show rtt loggfiles		<LINK> show logfiles
show subsrv <t>Show subscription server		<LINK> show subsrv
show subcli <t>Show subscription client		<LINK> show subcli
show device <t>Show devices			<LINK> show device
show remnode<t>Show RemNode objects		<LINK> show remnode
show remtrans<t>Show RemTrans objects		<LINK> show remtrans
show database<t>Show the runtime database	<LINK> show database
show file  <t>Show files			<LINK> show file
show graph <t>Show graph-files			<LINK> show graph
show time  <t>Show current time			<LINK> show time
show default<t>Show default directory		<LINK> show default
show children<t>Show the children of an object 	<LINK> show children
show message<t>Show a message	 		<LINK> show message
show objectlist<t>Show all objects of a specific class<LINK> show objectlist
show objid <t>Show object identity		<LINK> show objid
show parameter<t>Show an object attribute	<LINK> show parameter
show logging<t>Show a logging entry		<LINK> show logging
show eventlist<t>Show the event list		<LINK> show eventlist
show alarmlist<t>Show the alarm list		<LINK> show alarmlist
show user  <t>Show current user			<LINK> show user
sound      <t>Play a sound defined by a sound object	<LINK> sound
store      <t>Store an attribute list in a file <LINK> store
write object <t>Write the content of an object to file <LINK> write object
</TOPIC>	

<headerlevel>
<TOPIC> call method <style> function
Command   call method

Call a xtt method for an object.
Xtt methods are usually activated from the popup menu for an object.
This is an additional way to activate a methods, from a command
pushbutton in a Ge graph.

<B>xtt> call method /method= /object=

/method=	<t>the name of the method, i.e. the attribute ButtonName
		<t>in the method definition.
/object=	<t>the name of the object.
</TOPIC>

<TOPIC> check method <style> function
Command   check method

Call a xtt method filter for an object.
Method filter are used to decide whether to display a method button or not.
This command is used to disable a method button in a Ge graph. It returns
the filter value to the caller. 
It is only valid in a Ge graph.

<B>xtt> check method /method= /object=

/method=	<t>the name of the method, i.e. the attribute ButtonName
		<t>in the method definition.
/object=	<t>the name of the object.
</TOPIC>

<TOPIC> add parameter <style> function
Command   add parameter

Add an attribute to a list of attributes, and display the value of 
the attribute. 
A list of attributes will be created with the command 'show parameter',
and more attributes can be added to the list with 'add parameter'.

Object that matches the class, name and hierarchy description are displayed
on the screen.

<B>xtt> add parameter /parameter= /name= /class= /hierarchy=

/parameter=	<t>the name of the parameter to be displayed.
/name=		<t>the name of the object. Wildcard is allowed.
/class=		<t>displays objects of this class.
/hierarchy=	<t>displays objects below this object in the hierarchy.

<H2>related subjects
show parameter <LINK> show parameter
</TOPIC>

<TOPIC> show parameter <style> function
Command   show parameter

Create a new list, add an attributes to the list, and display the value of 
the attributes. 
More attributes can be added to the list with 'add parameter'.

Object that matches the class, name and hierarchy description are displayed
on the screen.

<B>xtt> show parameter /parameter= /name= /class= /hierarchy=

/parameter=	<t>the name of the parameter to be displayed.
/name=		<t>the name of the object. Wildcard is allowed.
/class=		<t>displays objects of this class.
/hierarchy=	<t>displays objects below this object in the hierarchy.

<H2>related subjects
add parameter <LINK> add parameter
</TOPIC>

<TOPIC> set parameter <style> function
Command   set parameter

Set the value of an attribute.

<B>xtt> set parameter /name= /value=

/name=		<t>the name of the parameter to be set.
/value=		<t>value to set.
/bypass=	<t>Bypass any access restrictions.
</TOPIC>

<TOPIC> set folder <style> function
Command   set folder

Set a folder in a tabbed window object.

<B>xtt> set folder 'graphname' /name= /index=

/name=		<t>the name of the tabbedwindow object.
/index=		<t>index of tab to set. Starting from 0.
</TOPIC>

<TOPIC> set subwindow <style> function
Command   set subwindow

View a graph in a Ge window object. This command is used on command
buttons to change the content of a window object. /source contains the
name of the graph to be viewed. Also object graphs can be viewed by
supplying the object with the /object qualifier.

<B>xtt> set subwindow 'graphname' /name= /source= [/object=]

'graphname' <t>the graph where the window object resides.
/name	<t>the name of the window object.
/source	<t>name of the Ge graph to view in the window object.
/object	<t>specifies the object when the graph is an object graph.
/x0	<t>Upper left x Ge coordinate for graph border. If x0, y0, x1, y1 are
        <t>supplied, another part of the graph than the one specified in the Graph 
        <t>attributes x0, y0, x1, y1 will be displayed. Implemented for graphs
        <t>in a multiview cell, not for window objects.
/y0	<t>Upper left y Ge coordinate for graph border.
/x1	<t>Lower right x Ge coordinate for graph border.
/x1	<t>Lower right y Ge coordinate for graph border.
</TOPIC>

<TOPIC> add menu <style> function
Command   add menu

Add a menu item to the xtt menu hierarchy. 
The menu is placed last in the current menu.
The action of the item can be to execute an xtt 
command, or display the attributes of an object.

<B>xtt> add menu /text= /command=
<B>xtt> add menu /text= /object=

/text<t>Text of the menu item.
/command<t>Xtt command to be executed when the item is activated.
/object<t>Object that will be displayed when the item is activated.

<H2>related subjects
create item <LINK> create item
delete item <LINK> delete item
</TOPIC>

<TOPIC> collect <style> function
Command   collect

Add an attribute to the collection list.
If the name qualifier is omitted the current selected attribute will 
be collected.

The /newwindow and /addwindow qualifiers are usually used in command
files for stored collections windows (files of type .rtt_col)


<B>xtt> collect
<B>xtt> collect /name= 
<B>xtt> collect /name= /newwindow /width= /height= /zoomfactor= /scantime=
                /title= /last
<B>xtt> collect /name= /addwindow /last

/name<t>Name of the attribute
/newwindow<t>Creates a new window and inserts the attrbute into 
          <t>this window.
/width    <t>Window width.
/height   <t>Window height.
/zoomfactor<t>Text zoom factor in new window.
/scantime <t>Update frequency for values.
/title    <t>Window title.
/last     <t>This is the last attribute to add for this window.
/addwindow <t>The attribute is added to the last created collect window.

Example

xtt> collect /name=hql-hvk-Start.ActualValue

<H2>related subjects
collect show <LINK> collect show
collect clear <LINK> collect clear
collect remove <LINK> collect remove
collect open <LINK> collect open
</TOPIC>

<TOPIC> collect show <style> function
Command   collect show

Display the collect list.

<B>xtt> collect show

<H2>related subjects
collect <LINK> collect
collect clear <LINK> collect clear
</TOPIC>

<TOPIC> collect clear <style> function
Command   collect clear

Clear the collect list.

<B>xtt> collect clear

<H2>related subjects
collect <LINK> collect
collect show <LINK> collect show
collect remove <LINK> collect remove
collect open <LINK> collect open
</TOPIC>

<TOPIC> collect remove <style> function
Command   collect remove

Clear an item in the collect list.

<B>xtt> collect remove

<H2>related subjects
collect <LINK> collect
collect show <LINK> collect show
collect open <LINK> collect open
</TOPIC>

<TOPIC> collect open <style> function
Command   collect open /file=

Open a stored collection window. If file is not specified, a
list of store windows are displayed.

<B>xtt> collect open
<B>xtt> collect open /file=Motor2

<H2>related subjects
collect <LINK> collect
collect show <LINK> collect show
collect remove <LINK> collect remove
collect open <LINK> collect open
</TOPIC>
<TOPIC> create opmenuitem <style> function
Command   create opmenuitem

Create a menu item in the operator window menu.
The action of the item can be either to execute a command.

<B>xtt> create opmenuitem /name= /command= /pixmap=

/name<t>Menu item name, with the name of above menues included.
     <t>The name should begin with 'Functions-' or its translation.
     <t>For other name segments submenues are created if they don't already exist.
     <t>Ex Functions-MyMenu-MyGraph
/command<t>Xtt command that will be executed when the menu item is activated.
/before	<t>The menu item is positioned first in the menu.
/after <t>The menu item is positioned last in the menu.
/pixmap <t>Pixmap for the menu item: 'graph' eller 'curve'.

Example

xtt> create opmenuitem /name="Functions-MyMenu-MyGraph"/after/pixmap=graph

<H2>related subjects
delete opmenuitem <LINK> delete opmenuitem
</TOPIC>

<TOPIC> create item <style> function
Command   create item

Create a menu item in the xtt menu hierarchy.
The action of the item can be either to execute 
a command, or to open a menu.

<B>xtt> create item /text= /command= /pixmap= /destination= /after /before /firstchild /lastchild
<B>xtt> create item /text= /menu /destination= /after /before /firstchild /lastchild

/text<t>Item text.
/command<t>Xtt command to be executed when the item is activated.
/menu	<t>The item will display a menu.
/destination<t>The destination item. Can be the parent or a sibling. If nullstring the
        <t>item is created on the top level.
/after	<t>Positions the item after the destination item.
/before	<t>Positions the item before the destination item.
/firstchild<t>Positions the item as first child of the destination item.
/lastchild<t>Positions the item as last child of the destination item.
/pixmap <t>Pixmap for the item: 'map', 'leaf', 'graph', 'list' or 'script'.

Example

xtt> create item /text="Motor1"/dest=Maintenance-Motors/command="open graph motor1"/first

<H2>related subjects
add menu <LINK> add menu
delete item <LINK> delete item
</TOPIC>

<TOPIC> crossreference <style> function
Command   crossreference

Show crossreferences.
Crossreferences can be displayed for
- Signals.
- Object references with GetData.
- c-functions or strings used in the code of CArithm- or DataArithm-objects.
If qualifiers are omitted the selected object will be examined.

<B>xtt> crossreference
<B>xtt> crossreference /name=
<B>xtt> crossreference /function= [/brief]
<B>xtt> crossreference /string= [/brief]

/name 	<t> Name of an object.
/function<t>Name of a c-function referenced in CArithm or DataArithm.
/string	<t> String that will be searched for in the code of CArithm- and DataArithm-object.

Examles

xtt> cross /name=hql-hvk-Start
xtt> cross /function="CreateHvkObject"
</TOPIC>

<TOPIC> exit <style> function
Command   exit

Close xtt.

<B>xtt> exit
</TOPIC>

<TOPIC> define <style> function
Command define

Define a symbol.

<B>xtt> define 'symbolname' 'text'

<h2>related subjects
symbol <LINK> symbol
show symbol <LINK> show symbol
symbolfile <LINK> symbolfile
</TOPIC>	

<TOPIC> delete opmenuitem <style> function
Command   delete opmenuitem

Delete a menu item in the operator window menu.
The menu item can be created by the user or an item of
the standard configuration.

<B>xtt> delete opmenuitem /name=

/name<t>Name of the menu item.

Example

xtt> delete opmenuitem /name=Functions-Curves

<H2>related subjects
create opmenuitem <LINK> create opmenuitem
</TOPIC>

<TOPIC> delete item <style> function
Command   delete item

Delete a menu item.
The menu item can be created by the user or an item of
the xtt standard configuration.

<B>xtt> delete item /name=

/name<t>Name of the menu item.

Example

xtt> delete item /name=exit

<H2>related subjects
add menu <LINK> add menu
create item <LINK> create item
</TOPIC>

<TOPIC> eventlist <style> function
Command   eventlist

Handle the eventlist

<b>xtt> eventlist load

Load the eventlist.

<b>xtt> eventlist unload

Unload the eventlist.

<b>xtt> eventlist acknowledge /priority= 

Acknowledge last alarm of specified priority. Priority can be A, B, C, D, I or NOA.
NOA acknowleges the last not A alarm.

<b>xtt> eventlist acknowledge /all 

Acknowledge all alarms.

<H2>related subjects
show alarmlist <LINK> show alarmlist
show eventlist <LINK> show eventlist

</TOPIC>

<TOPIC> help <style> function
Command   help

Display help information for a subject.
The help information will be searched for in a help file. The
file can be the base helpfile, the project helpfile or another
help file.

If no helpfile is supplied the subject will be searched
for in the base and project helpfiles.

<B>xtt> help 'subject' [/popnavigator] [/bookmark=] [/helpfile=]
<B>                       [/returncommand=][/width=][/height=]

/popnavigator	<t>The help window (the navigator) will be displayed on top of
		<t>the other window and gain input focus. This is useful if
		<t>the command is used in a ge graph.
/bookmark	<t>The name of a bookmark inside the topic. The display will
		<t>be positioned at the bookmark.
/helpfile	<t>A help file that contains information of the help subject.
/returncommand	<t>A command that is executed when returning from the help
		<t>subject. This is usually used to return to a main topic when
		<t>help is called from a command button in a ge picture.
/width		<t>Desired width of the help window.
/height		<t>Desired height of the help window.

<H2>related subjects
helpfile <LINK> helpfile
</TOPIC>

<TOPIC> login <style> function
Command   login

Login with username an password. The privileges of the user will be
fetched from the user database, and affect the access to the system.

<B>xtt> login 'username' 'password'

<H2>related subjects
logout <LINK> logout
</TOPIC>

<TOPIC> logout <style> function
Command   logout

Logout a user, and return to the original user.

<B>xtt> logout

<H2>related subjects
login <LINK> login
</TOPIC>

<TOPIC> open <style> function
Command   open

Open various windows.

open attribute <t>Open a value change dialog for an attribute <LINK> open attribute
open consolelog <t>Display system messages	<LINK> open consolelog
open fast   <t>Open fast curve			<LINK> open fast
open fileview <t>Open a fileview		<LINK> open fileview
open graph  <t>Open a graph			<LINK> open graph
open history <t>Open process history curve      <LINK> open history
open multiview  <t>Open a multiview		<LINK> open multiview
open jgraph <t>Open a java graph		<LINK> open jgraph
open navigator <t>Open the navigator		<LINK> open navigator
open operatorwindow<t>Open the operator window 	<LINK> open operatorwindow
open shistory <t>Open a list with all history curves for an object <LINK>open shistory
open trace  <t>Open trace for a plc window      <LINK> open trace
open trend  <t>Open DsTrend or PlotGroup graph	<LINK> open trend
open tcurve <t>Open a trend snapshot		<LINK> open tcurve
open url    <t>Open an URL in a web browser	<LINK> open url
</TOPIC>

<TOPIC> open graph <style> function
Command   open graph

Open a ge graph. The graph can be supplied as a pwg-file or as
a XttGraph object.

<B>xtt> open graph 'filename' /width= /height= /scrollbar /menu /navigator
<B>                           /instance= /focus= /inputempty

<B>xtt> open graph /object= /focus= /inputempty
<B>xtt> open graph /class /instance=

/width	<t>Width in pixel.
/height	<t>Height in pixel.
/scrollbar<t>Scrollbars will be displayed in the graph window.
/menu	<t>A menu will be displayed in the graph window.
/navigator<t>A navigator window will be opened.
/object	<t>An XttGraph-object. If the name starts with '$node' or '*' this will be
	<t>replaced by the node object.
/instance <t>Open the object graph or an hierarchy graph for this instance. 
        <t>If /class is supplied the object graph is opened, otherwise a
        <t>filename can be supplied.
/class  <t>Open the object graph for the instance object.
/parent <t>Specifies that the object graph for the parent of the instance object
        <t>should be opened.
/focus  <t>Name of a value input object. The object will gain input focus 
        <t>when the graph is opened.
/inputempty <t>The input label of the input focus object will be empty.
/pwindow <t>Filename of another window that this graph should be placed
        <t>on top of. The string $current will denote the current window
	<t>when the graph is opened from a push button in this window.
/pinstance <t>Instance name for the pwindow graph, if pwindow is an object 
	<t>graph.
/fullscreen <t>Open the window fullscreen without frame.
/maximize   <t>Open the window maximized with frame.
/iconify    <t>Open the window iconified.
/hide	    <t>Don't display the graph on the screen.
/x0	<t>Upper left x Ge coordinate for graph border. If x0, y0, x1, y1 are
        <t>supplied, another part of the graph than the one specified in the Graph 
        <t>attributes x0, y0, x1, y1 will be displayed.
/y0	<t>Upper left y Ge coordinate for graph border.
/x1	<t>Lower right x Ge coordinate for graph border.
/x1	<t>Lower right y Ge coordinate for graph border.
</TOPIC>

<TOPIC> open multiview <style> function
Command   open multiview

Open a multiview window specified by an XttMultiView object.

<B>xtt> open multiview 'objectname' /width= /height= /xposition= /yposition=
<t><t>/fullscreen /maximize /iconify /hide

'objectname' <t>Name of and XttMultiView object. If the name starts with '$node'
            <t>or '*' this will be replace by the node object.
/width      <t>Window width in pixels.
/height     <t>Window height in pixels.
/xposition  <t>Window x position in pixels.
/yposition  <t>Window y position in pixels.
/fullscreen <t>Open the window fullscreen without frame.
/maximize   <t>Open the window maximized with frame.
/iconify    <t>Open the window iconified.

</TOPIC>

<TOPIC> open shistory <style> function
Command   open shistory

Open a list of history curves for an object.
Displays a list of all SevHist and SevHistObject storing process history 
for different attributes in an object.

<B>xtt> open shistory /name=

/name	 <t>Object name.

</TOPIC>

<TOPIC> open history <style> function
Command   open history

Open process history for an object. Data is fetched from the storage server, 
but can also read from a file containing history data previously stored with 
the export function.

<B>xtt> open history [/name=] [/title=]
<B>xtt> open history /file=

/name	<t>An object with stored process history.
/file   <t>Open a file containing history data previously stored with the 
	<t>export function.
/title  <t>Title of curve window.
/width  <t>Window width in pixels.
/height <t>Window height in pixels.
/fullscreen <t>Open the window fullscreen without frame.
/maximize   <t>Open the window maximized with frame.
/iconify    <t>Open the window iconified.

Example

xtt> open history /name=hql-hvk-flow
</TOPIC>

<TOPIC> open attribute <style> function
Command   open attribute

Open a value input dialog for an attribute.

<B>xtt> open attribute /name= [/title=]

/name	<t>Attribute name.
/title	<t>Window title.
</TOPIC>

<TOPIC> open consolelog <style> function
Command   open consolelog

Display system messages.

<B>xtt> open consolelog
</TOPIC>

<TOPIC> open url <style> function
Command   open url

Open an URL in a web browser.

<B>xtt> open url 'URL'

<B>Example
xtt> open url http://www.proview.se
</TOPIC>

<TOPIC> open jgraph <style> function
Command   open jgraph

Open a java frame. The java frame can be exported from Ge or drawn in
JBuilder.

<B>xtt> open jgraph 'name'
</TOPIC>

<TOPIC> open navigator <style> function
Command   open navigator

Open the runtime navigator. If an object is supplied the object is selected in the 
navigator object tree.

<B>xtt> open navigator [/object=]

/object <t>Name of an object or attribute that is viewed and selected. Optional.
</TOPIC>

<TOPIC> open fileview <style> function
Command   open fileview

Opens a fileview that displays files that matches the specified pattern.
The fileview can be opened in 'Open File' or 'Save File' mode.

In open mode, a file is selected and the selected filename is written to a
string attribute in the database (target). Simultaneously a digital attribute is
set (trigger) to indicate that an open should be performed. The actual opening
can be done by a DataFRead object in the plc, but has to be programmed by the user.

In save mode, a file is selected, or a filename is entered. The filename is
written to a string attribute and a digital signal is set. The actual save
can be performed by a DataFWrite object in the plc.

<B>xtt> open fileview /file= /target= /trigger= /type=save [/ftype=]
<B>xtt> open fileview /file= /target= /trigger= /type=open

/file   <t>File pattern, containing wildcard '*', for files that is to be viewed 
        <t>in the fileview.
/ftype  <t>Default file type for input file. If an entered filename (in save mode)
        <t>doesn't contain a filetype, the default filetype will be added to the filename.
/target <t>String attribute where the selected filename will be stored.
/trigger <t>Boolean attribute that is set to indicate that a save or open should 
        <t>be performed.
/type   <t>'save' or 'open'

<b>Example
open fileview /file="$pwrp_load/*.txt"/ftype="txt"/target=P1-Sv.ActualValue/trigger=P1-Dv.ActualValue/type=save

</TOPIC>

<TOPIC> open trace <style> function
Command   open trace

Open trace for a plc window. If the name qualifier is omitted,
trace will be opened for the selected PlcPgm or PlcWindow.

<B>xtt> open trace [/name=] [/center=]

/name	<t>PlcPgm or PlcWindow.
/center <t>Object in the plc-window that will be centered and selected.
	<t>Use the last segment of the name.

Examples

xtt> open trace /name=hql-hvk-flow /center=Pid0
</TOPIC>

<TOPIC> open trend <style> function
Command   open trend

Open a graph for a DsTrend, DsTrendCurve or PlotGroup object.

<B>xtt> open trend [/name=] [/title=]

/name	<t>DsTrend, DsTrendCurve or PlotGroup. Can be a list of DsTrend-objects
        <t>separated by comma.
/title  <t>Title of curve window.
/width  <t>Window width in pixels.
/height <t>Window height in pixels.
/fullscreen <t>Open the window fullscreen without frame.
/maximize   <t>Open the window maximized with frame.
/iconify    <t>Open the window iconified.

Examples

xtt> open trend /name=hql-hvk-flow-Trend,hql-hvk-temperature-Trend
</TOPIC>

<TOPIC> open fast <style> function
Command   open fast

Open a fast curve specfied with a DsFastCurve object.

<B>xtt> open fast /name= [/title=]
<B>xtt> open fast /file=

/name	<t>DsFastCurve or PlotGroup. Can be a list of DsFast-objects
        <t>separated by comma.
/file   <t>Opens a file previously created with the export function for fast
        <t>curves.
/title  <t>Title of curve window.
/width  <t>Window width in pixels.
/height <t>Window height in pixels.
/fullscreen <t>Open the window fullscreen without frame.
/maximize   <t>Open the window maximized with frame.
/iconify    <t>Open the window iconified.

Examples

xtt> open fast /name=hql-hvk-flow-Fast
</TOPIC>

<TOPIC> open tcurve <style> function
Command   open tcurve

Takes a snapshot of a trend curve and displays the snapshot. With the /new qualifier
an empty curve window is opened where a previously stored snapshot curve can be viewed.

<B>xtt> open tcurve /name= [/title=] [/height=] [/width=]
<B>xtt> open tcurve /new [/title=]

/name	<t>DsTrendCurve object to take a snapshot from.
/new    <t>Opens an empty tcurve window where a stored snapshot curve can inserted from
        <t>File/Open in the menu.
/title  <t>Title of graph window.
/width  <t>Window width in pixels.
/height <t>Window height in pixels.
/fullscreen <t>Open the window fullscreen without frame.
/maximize   <t>Open the window maximized with frame.
/iconify    <t>Open the window iconified.

Example

xtt> open tcurve /name=hql-hvk-flow-Trend
</TOPIC>

<TOPIC> open operatorwindow <style> function
Command   open operatorwindow

Open the operatorwindow.

<B>xtt> open operatorwindow 'opplace-object'
</TOPIC>

<TOPIC> close graph <style> function
Command   close graph

Close a ge graph. The graph can be supplied as a pwg-file or as
a XttGraph object. To close a graph from a button inside the graph
$current can be used, 'close graph $current'.

<B>xtt> close graph 'filename' /instance=
<B>xtt> close graph /object=

/object	<t>A XttGraph-object. If the namestring begins with '*', * is
	<t>replaced by the node object.
/instance <t>Open the class graph for this instance.
</TOPIC>

<TOPIC> close multiview <style> function
Command   close multiview

Close a multiview window.
To close a multiview from a button inside the multiview $current can be used
'close multiview $current'.

<B>xtt> close multiview 'objectname'

'objectname' <t>Name of the XttMuliView object.
</TOPIC>

<TOPIC> close alarmlist <style> function
Command   close alarmlist

Close the alarmlist.

<B>xtt> close alarmlist

</TOPIC>

<TOPIC> close eventlist <style> function
Command   close eventlist

Close the eventlist.

<B>xtt> close eventlist

</TOPIC>

<TOPIC> close navigator <style> function
Command   close navigator

Close the navigator.

<B>xtt> close navigator

</TOPIC>

<TOPIC> search <style> function
Command   search

Search for an objectname or a string.

<B>xtt> search 'object'
<B>xtt> search /regularexpression 'expression'
<B>xtt> search /next
</TOPIC>

<TOPIC> read object <style> function
Command   read object

Read the content of an object from file.
Reads the content of a file, normally created by command 'write object',
and insert the value into the specified object.

<B>xtt> read object /object= /file=

/object <t>Name of object.
/file   <t>Name of file to read from.
</TOPIC>

<TOPIC> set advanceduser <style> function
Command   set advanceduser

Set or reset advanced user.

<B>xtt> set advanceduser
<B>xtt> set noadvanceduser

<H2>related subjects
advanced user <LINK> advanced user
</TOPIC>

<TOPIC> set display <style> function
Command   set display

Set format for display of the selected attribute. The attribute can
be displayed as decimal, hexadecimal, octal, binary, integer or float.
Object identities and attribute references can be displayed
as identity.

<B>xtt> set display default
<B>xtt> set display hexdecimal
<B>xtt> set display decimal
<B>xtt> set display octal
<B>xtt> set display binary
<B>xtt> set display integer
<B>xtt> set display float
<B>xtt> set display identity

</TOPIC>

<TOPIC> setup <style> function
Xtt setup
Setup of xtt properies

ConfigureObject	<t><t>RttConfigure object.
DefaultDirectory<t><t>Default directory for commandfiles.
Scantime	<t><t>Scan time for update fileds.
AlarmMessage	<t><t>Display last alarm in the Xtt-message field.
AlarmBeep	<t><t>Beep if unacknowledged alarms exist.
AlarmReturn	<t><t>Display return events in the eventlist.
AlarmAck	<t><t>Display acknowledged events in the eventlist.
SymbolFilename	<t><t>Symbolfile.		<LINK> symbolfile
Verify		<t><t>Verify commandfile execution.
AdvancedUser	<t><t>User is advanced. <LINK> advanced user
</TOPIC>

<TOPIC> show version <style> function
Command   show version

Show the xtt version

<B>xtt> show version
</TOPIC>

<TOPIC> show symbol <style> function
Command   show symbol

Show one symbol, or all symbols

<B>xtt> show symbol 'symbol'<t>	<t>Show symbol 'symbol'
<B>xtt> show symbol<t>		<t>Show all symbols

<h2>related subjects
define <LINK> define
symbol <LINK> symbol
</TOPIC>

<TOPIC> show plcpgm <style> function
Command   show plcpgm

List the PlcPgm-objects in the system.

<B>xtt> show plcpgm
</TOPIC>

<TOPIC> show plcthreads <style> function
Command   show plcthreads

Display the PlcThread-objects.
The PlcThreads contains information and statistics for
the plc-threads.

<B>xtt> show plcthreads
</TOPIC>

<TOPIC> show links <style> function
Command   show links

Show the links to other proview systems.

<B>xtt> show links
</TOPIC>

<TOPIC> show logfiles <style> function
Command   show logfiles

Show the rtt log-files in the current work directory. 
A log-file is created by the logging function in rtt or xtt and
has the filetype .rtt_log.

A logfile is opened with double-click, or by selecting the file 
and then pressing return.

<B>xtt> show logfiles
</TOPIC>

<TOPIC> show alarmlist <style> function
Command   show alarmlist

Open the alarmlist window.
With the 'show alarmlist satellite' command multiple alarmlists can 
be opened with differnt alarmview.

<B>xtt> show alarmlist
<B>xtt> show alarmlist satellite [/alarmview=] [/width=] [/height=] 
<t><t>[/xposition=] [/yposition=]

/alarmaview <t>Name of an AlarmView object.
/width      <t>Window width in pixels.
/height     <t>Window height in pixels.
/xposition  <t>Window x position in pixels.
/yposition  <t>Window y position in pixels.
</TOPIC>

<TOPIC> show eventlist <style> function
Command   show eventlist

Open the eventlist window.

<B>xtt> show eventlist
</TOPIC>

<TOPIC> show user <style> function
Command   show user

Show the current user and his privileges.

<B>xtt> show user
</TOPIC>

<TOPIC> show message <style> function
Command   show message

Open a message window.

<B>xtt> show message /text= [/title=]

/text 	    <t>Message text.
/title      <t>Window title.
</TOPIC>

<TOPIC> show objectlist <style> function
Command   show objectlist

Open a list dialog with all objects of a specific class or
a number of specific classes. When an object in the list is
activated, the object graph for the object is opened.

<B>xtt> show objectlist /class= [/title=] [/sort]

/class <t>The name of a class, or serveral class names
       <t>separated by comma.
/title <t>Title of the list dialog.
/sort  <t>The objects are sorted in alphabetical order.
</TOPIC>

<TOPIC> sound <style> function
Command   sound

Play a sound defined by a Sound or SoundSequence object.

<B>xtt> sound 'object'

</TOPIC>

<TOPIC> store <style> function
Command   store

Store an attribute list to a scrip-file, or store the current 
symbol table to a scrip-file.
The generated script-file can be executed from the command-prompt
with @'filename', or it can be found among the script-files in the
menu beneath 'Store'. 

If the /collect is used, the attribute-list
will be restored in the collect list.

<B>xtt> store 'filename' [/collect]
<B>xtt> store 'filename' /symbols

/collect <t>The list is restored in the collection list.
/symbols <t>The current symbol table is stored.

</TOPIC>

<TOPIC> show logging <style> function
Command   show logging

Show a logging entry.

<B>xtt> show logging /entry=
</TOPIC>

<TOPIC> logging <style> function
Command   logging

A number of commands handle the xtt logging.

logging start		<LINK> logging start
logging stop		<LINK> logging stop
logging set		<LINK> logging set
logging show		<LINK> logging show
logging store		<LINK> logging store

</TOPIC>

<TOPIC> write object <style> function
Command   write object

Write the content of an object to file.

<B>xtt> write object /object= /file=

/object <t>Name of object.
/file   <t>Name of file to write to.
</TOPIC>


</headerlevel>
</chapter>

//
// Script
//

<chapter>
<TOPIC> script
Xtt script


Execute script		<LINK> execute script

<h2>Datatypes and declarations
Datatypes		<LINK> datatypes
Datatype conversions	<LINK> datatype conversions
Variable declarations	<LINK> variable declarations
Operators		<LINK> operators

<h2>Statements
main-endmain		<LINK> main-endmain
function-endfunction	<LINK> function-endfunction
if-else-endif		<LINK> if-else-endif
while-endwhile		<LINK> while-endwhile
for-endfor		<LINK> for-endfor
break			<LINK> break
continue		<LINK> continue
goto			<LINK> goto
include			<LINK> include

<h2>Input/output functions
ask()			<LINK> ask()
printf()		<LINK> printf()
say()			<LINK> say()
scanf()			<LINK> scanf()

<h2>File handling functions
fclose()		<LINK> fclose()
felement()		<LINK> felement()
fgets()			<LINK> fgets()
fopen()			<LINK> fopen()
fprintf()		<LINK> fprintf()
fscanf()		<LINK> fscanf()
translate_filename()	<LINK> translate_filename()

<h2>String functions
edit()			<LINK> edit()
element()		<LINK> element()
extract()		<LINK> extract()
sprintf()		<LINK> sprintf()
strchr()		<LINK> strchr()
strrchr()		<LINK> strrchr()
strlen()		<LINK> strlen()
strstr()		<LINK> strstr()
toupper()		<LINK> toupper()
tolower()		<LINK> tolower()

<h2>Database functions
GetAttribute()		<LINK> getattribute()
GetChild()		<LINK> getchild()
GetParent()		<LINK> getparent()
GetNextSibling()	<LINK> getnextsibling()
GetClassList()		<LINK> getclasslist()
GetNextObject()		<LINK> getnextobject()
GetObjectClass()	<LINK> getobjectclass()
GetNodeObject()		<LINK> getnodeobject()
GetRootList()		<LINK> getrootlist()

<h2>System functions
exit()			<LINK> exit()
system()		<LINK> system()
time()			<LINK> time()
verify()		<LINK> verify()

<h2>Miscellaneous functions
CutObjectName()		<LINK> cutobjectname()
ConfirmDialog()		<LINK> confirmdialog()
MessageError()		<LINK> messageerror()
MessageInfo()		<LINK> messageinfo()
GetCurrentText()	<LINK> getcurrenttext()
GetCurrentObject()	<LINK> getcurrentobject()
pwr_get_config()	<LINK> pwr_get_config()
get_node_name()		<LINK> get_node_name()
get_language()		<LINK> get_language()

<h2>xtt-commands
xtt-commands		<LINK> xtt-commands

</TOPIC>

<TOPIC> execute script
Execute a script

A script-file will be executed from the command-line with the command

xtt> @'filename'

</TOPIC>

<TOPIC> datatypes
Datatypes

The datatypes are float, int and string.

int	<t>integer value.
float	<t>32-bit float value.
string	<t>80 character string (null terminated).

There are three different tables in which a variable can be declared: local, 
global and extern. A local variable is known inside a function, a global is 
known in all functions in a file (with include-files), an external is known 
for all files executed in a session.

</TOPIC>

<TOPIC> datatype conversions
Datatype conversions

If an expression consists of variables and functions of different datatypes
the variables will be converted with the precedence string, float, int. If
two operands in an expression is of type int and float, the result will be float
If two operands is of type float and string, or int and string, the result will
be string. In an assignment the value of an expression will be converted to the
type of the assignment variable, even if the result is a string and the
variable is of type float or int.

<b>Example

<c>string str;
<c>int    i = 35;
<c>str = "Luthor" + i;
The value in str will be "Luthor35".

<c>float   f;
<c>string  str = "3.14";
<c>int     i = 159;
<c>f = str + i;
The value in f will be 3.14159.
</TOPIC>

<TOPIC> variable declarations
Variable declarations

A variable must be declared before it is used.
A declaration consists of
- the table (global or extern, if local the table is suppressed)
- the datatype (int, float or string)
- the variable name (case sensitive)
- if array, number of elements
- equal mark followed by an init value, if omitted the init value is zero or
  null-string
- semicolon

An extern variable should be deleted (by the delete statement).

<b>Example

<c>int             i;
<c>float           flow = 33.4;
<c>string          str = "Hello";
<c>extern int      jakob[20];
<c>global float    ferdinand = 1234;
<c>...
<c>delete jakob[20];
</TOPIC>

<TOPIC> operators
Operators

The operators have the same function as i c, with some limitations. All
operators are not implemented. Some operators (+,=,==) can also operate on
string variables. Precedence of operators is similar to c.

Operator	<t>Description		<t>Datatypes
+		<t>plus			<t>int, float, string
-		<t>minus			<t>int, float
*		<t>times			<t>int, float
/		<t>divide			<t>int, float
++	 	<t>increment, postfix only.	<t>int, float
--	 	<t>decrement, postfix only	<t>int, float
>>	 	<t>bits right-shifted		<t>int
<<	 	<t>bits left-shifted		<t>int
<		<t>less than			<t>int, float
>		<t>greater than		<t>int, float
<=	 	<t>less equal			<t>int, float
>=	 	<t>greater equal		<t>int, float
==	 	<t>equal			<t>int, float, string
!=	 	<t>not equal			<t>int, float, string
&		<t>bitwise and		<t>int
|		<t>bitwise or			<t>int
&&	 	<t>logical and		<t>int
||	 	<t>logical or			<t>int
!		<t>logical not		<t>int
=		<t>assign			<t>int, float, string
+=	 	<t>add and assign		<t>int, float
-=	 	<t>minus and assign		<t>int, float
&=	 	<t>logical and and assign	<t>int
|=	 	<t>logical or and assign	<t>int
</TOPIC>

<TOPIC> sc_statements <style> function
Script statements

main-endmain		<t>Main function.<LINK> main-endmain
function-endfunction	<t>Function declaration.<LINK> function-endfunction
if-else-endif		<t>Conditional execution.<LINK> if-else-endif
while-endwhile		<t>While loop.<LINK> while-endwhile
for-endfor		<t>For loop.<LINK> for-endfor
break			<t>Terminate while or for loop.<LINK> break
continue		<t>Continue while or for loop.<LINK> continue
goto			<t>Jump to label.<LINK> goto
include			<t>Include script file.<LINK> include
</TOPIC>

<headerlevel>
<TOPIC> main-endmain <style> function
main-endmain

The main and endmain statements controls where the execution starts and stops
If no main and endmain statements will be found, the execution will start
att the beginning of the file and stop at the end.

<b>Example

<c>main()
<c>  int a;

<c>  a = p1 + 5;
<c>  printf( "a = %d", a);
<c>endmain
</TOPIC>

<TOPIC> function-endfunction <style> function
function-endfunction

A function declaration consists of
- the datatype of the return value for the function
- the name of the function
- an argumentlist delimited by comma and surrounded by parenthesis. The
  argumentlist must include a typedeclaration and a name for each argument.

The arguments supplied by the caller will be converted to the type of the
to the type declared in the argument list. If an argument is changed inside
the function, the new value will be transferred to the caller. In this way
it is possible to return other values then the return value of the function.
A function can contain one or several return statements. The return will hand
over the execution to the caller and return the supplied value.

<b>Example

<c>function float calculate_flow(float a, float b)
<c>  float c;
<c>  c = a + b;
<c>  return c;
<c>endfunction

<c>...
<c>flow = korr * calculate_flow( v, 35.2);
</TOPIC>

<TOPIC> if-else-endif <style> function
if-else-endif

The lines between a if-endif statement will be executed if the expression
in the if-statement is true. The expression should be surrounded by parentheses.
If an else statement is found between the if and endif the lines between else
and endif will be executed if the if-expression is false.

<b>Example

<c>if ( i < 10 && i > 5)
<c>  a = b + c;
<c>endif

<c>if ( i < 10)
<c>  a = b + c;
<c>else
<c>  a = b - c;
<c>endif
</TOPIC>

<TOPIC> while-endwhile <style> function
while-endwhile

The lines between a while-endwhile statement will be executed as long as the
expression in the while-statement is true. The expression should be surrounded
by parentheses.

<b>Example

<c>while ( i < 10)
<c>  i++;
<c>endwhile
</TOPIC>

<TOPIC> for-endfor <style> function
for-endfor

The lines between a for-endfor statement will be executed as long as the
middle expression in the for-statement is true. The for expression consists
of three expression, delimited by semicolon and surrounded by parentheses.
The first expression will be executed the before the first loop, the third
will be executed after every loop, the middle is executed before every loop
and if it is true, another loop is done, if false the loop is leaved.

<b>Example

<c>for ( i = 0; i < 10; i++)
<c>  a += b;
<c>endfor
</TOPIC>

<TOPIC> break <style> function
break

A break statement will search for the next endwhile or endfor statement
continue the execution at the line after.

<b>Example

<c>for ( i = 0; i < 10; i++)
<c>  a += b;
<c>  if ( a > 100)
<c>    break;
<c>endfor
</TOPIC>

<TOPIC> continue <style> function
continue

A continue statement will search for the previous while or for statement
continue the loop execution.

<b>Example

<c>for ( i = 0; i < 10; i++)
<c>  b = my_function(i);
<c>  if ( b > 100)
<c>    continue;
<c>  a += b;
<c>endfor
</TOPIC>

<TOPIC> goto <style> function
goto

A goto will cause the execution to jump to a row defined by label.
The label line is terminated with colon.

<b>Example

<c>  b = attribute("MOTOR-ON.ActualValue", sts);
<c>  if (!sts)
<c>    goto some_error; 
<c>  ...
<c>some_error:
<c>  say("Something went wrong!");
</TOPIC>

<TOPIC> include <style> function
include

An script include-file containing functions can be included with the
#include statement. The default file extention is '.pwr_com'

<b>Example

<c>#include <my_functions>
</TOPIC>
</headerlevel>

<TOPIC> sc_input_output_functions <style> function
Input/Output functions

<b>Function <t>Description
ask <t>Print a question an read an answer.<link> ask() 
printf <t>Formatted print.	<link> printf()
say <t>Print a text.		<link> say()
scanf  <t>Formatted read.	<link> scanf()
</TOPIC>

<headerlevel>

<TOPIC> ask() <style> function
ask()

int ask( string question, (arbitrary type) reply)

<b>Description

Prompts for input with supplied string.
Returns number of read tokens, 1 or 0.

<b>Arguments

string 			<t>question	<t>Prompt.
arbitrary type		<t>reply	<t>Entered reply. Can be int,
			<t>		<t>float or string.

<b>Example
<c> string reply;

<c> ask( "Do you want to continue? [y/n] ", reply);
<c> if ( reply != "y")
<c>   exit();
<c> endif
</TOPIC>

<TOPIC> printf() <style> function
printf()

int printf( string format [, (arbitrary type) arg1, (arbitrary type) arg2])

<b>Description

Formatted print. C-syntax. Format argument and non, one or two value arguments.
Returns number of printed characters.

<b>Arguments

string 			<t>format	<t>Format.
arbitrary type		<t>arg1		<t>Value argument. Optional. Can be int,
			<t>		<t>float or string.
arbitrary type		<t>arg2		<t>Value argument. Optional. Can be int,
			<t>		<t>float or string.

<b>Example

<c>  printf( "Watch out!");
<c>  printf( "a = %d", a);
<c>  printf( "a = %d and str = %s", a, str);
</TOPIC>

<TOPIC> say() <style> function
say()

int say( string text)

<b>Description

Prints a string.

<b>Arguments

string 			<t>text		<t>Text to print.

<b>Example
<c> say( "Three quarks for Muster Mark!");
</TOPIC>

<TOPIC> scanf() <style> function
scanf()

int scanf( string format , (arbitrary type) arg1)

<b>Description

Formatted input. C-syntax.
Returns number of read characters.

<b>Arguments

string 			<t>format	<t>Format.
arbitrary type		<t>arg1		<t>Value argument. Returned. Can be int,
			<t>		<t>float or string.

<b>Example

<c>  scanf( "%d", i);
</TOPIC>
</headerlevel>

<TOPIC> sc_input_output_functions <style> function
Input/Output functions

<b>Function <t>Description
fclose <t>Close a file 			<link> fclose()
felement <t>Extract one element from the last read line. <link> felement()
fgets <t>Read a line from a file. 	<link> fgets()
fopen <t>Open a file.			<link> fopen()
fprintf <t>Formatted write to file.	<link> fprintf()
fscanf <t>Formatted read from file.	<link> fscanf()
translate_filename <t>Replace environment variables in a file name. <link> translate_filename()
</TOPIC>

<headerlevel>

<TOPIC> fclose() <style> function
fclose()

int fclose( int file)

<b>Description

Closes an opened file.

<b>Arguments

int		<t>file		<t>file-id returned by fopen.

<b>Example

<c>  int infile;
<c>  infile = fopen("some_file.txt","r");
<c>  ...
<c>  fclose( infile);
</TOPIC>

<TOPIC> felement() <style> function
felement()

string felement( int file, int number, string delimiter, string str)

<b>Description

Extracts one element from a string of elements read from a file with the
fgets() function. felement() can be used in favor of element() when the read
string is larger than the string size 256. felement() can parse lines up to 
1023 characters.

<b>Arguments

int		<t>number	<t>the number of the element.
string		<t>delimiter	<t>delimiter character.

<b>Returns
string				<t><t>The extracted element.

<b>Example

<c>  string elem1;
<c>  int file;
<c>  string line;

<c>  file = fopen( "my_file.txt", "r");
<c>  while( fgets( line, file))
<c>    elem1 = felement( 1, " ");
<c>  endwhile
</TOPIC>

<TOPIC> fgets() <style> function
fgets()

int fgets( string str, int file)

<b>Description

Reads a line from a specified file.
Returns zero if end of file.

<b>Arguments

string 		<t>str		<t>Read line. Returned. 
int		<t>file		<t>file returned by fopen.

<b>Example

<c>  file = fopen("some_file.txt","r");
<c>  while( fgets( str, file))
<c>    say( str);
<c>  endwhile
<c>  fclose( file);
</TOPIC>

<TOPIC> fopen() <style> function
fopen()

int fopen( string filespec, string mode)

<b>Description

Opens a file for read or write.
Returns a file identifier. If the file could not be opened, zero is returned.

<b>Arguments

string 		<t>filespec	<t>Name of file. 
string		<t>mode		<t>Access mode

<b>Returns
int				<t><t>File identifier, or zero on error.

<b>Example

<c>  int infile;
<c>  int outfile;

<c>  infile = fopen("some_file.txt","r");
<c>  outfile = fopen("another_file.txt","w");
<c>  ...
<c>  fclose( infile);
<c>  fclose( outfile);
</TOPIC>

<TOPIC> fprintf() <style> function
fprintf()

int fprintf( int file, string format [, (arbitrary type) arg1,
	(arbitrary type) arg2])

<b>Description

Formatted print on file. C-syntax. Format argument and non, one or two value
arguments.
Returns number of printed characters.

<b>Arguments

int 			<t>file		<t>File id returned by fopen.
string 			<t>format	<t>Format.
arbitrary type		<t>arg1		<t>Value argument. Optional. Can be int,
			<t>		<t>float or string.
arbitrary type		<t>arg2		<t>Value argument. Optional. Can be int,
			<t>		<t>float or string.

<b>Example

<c>  int outfile;
<c>  outfile = fopen( "my_file.txt", "w");
<c>  if (!outfile)
<c>    exit();
<c>  fprintf( outfile, "Some text");
<c>  fprintf( outfile, "a = %d", a);
<c>  fclose( outfile);
</TOPIC>

<TOPIC> fscanf() <style> function
fscanf()

int fscanf( int file, string format , (arbitrary type) arg1)

<b>Description

Formatted read from file. C-syntax.
Returns number of read characters.

<b>Arguments

int 			<t>file		<t>File id.
string 			<t>format	<t>Format.
arbitrary type		<t>arg1		<t>Value argument. Returned. Can be int,
			<t>		<t>float or string.

<b>Example

<c>  int file;
<c>  int i;

<c>  file = fopen( "my_file.txt", "r");
<c>  if (file)
<c>    fscanf( file, "%d", i);
<c>    fclose( file);
<c>  endif
</TOPIC>

<TOPIC> translate_filename() <style> function
translate_filename()

string translate_filename( string fname)

<b>Description

Replace environment variables in filename.

<b>Arguments

string		<t>fname	<t>A filename.

<b>Returns
string				<t><t>String with expanded env variables.

<b>Example

<c>  string fname1 = "$pwrp_db/a.wb_load";
<c>  string fname2;
<c>  fname2 = translate_filename( fname1);
</TOPIC>
</headerlevel>

<TOPIC> string_functions <style> function
String functions

<b>Function <t>Description
edit <t>Remove superfluous spaces and tabs. <link> edit()
element <t>Extract one element from a string. <link> element()
extract <t>Extract a substring from a string. <link> extract()
sprintf <t>Formatted print to a string.	<link> sprintf()
strchr <t>Return the first occurence of a character in a string. <link> strchr()
strrchr <t>Return the last occurence of a character in a string. <link> strrchr()
strlen <t>Calculate the length of a string.	<link> strlen()
strstr <t>Return the first occurence of a substring in a string. <link> strstr()
tolower <t>Convert string to lower case. <link> tolower()
toupper <t>Convert string to upper case. <link> toupper()
</TOPIC>

<headerlevel>
<TOPIC> edit() <style> function
edit()

string edit( string str)

<b>Description

Removes leading and trailing spaces and tabs, and replaces multiple tabs and
spaces with a single space.
Returns the edited string.

<b>Arguments

string		<t>str		<t>string to be edited.

<b>Example

<c>  collapsed_str = edit(str);
</TOPIC>

<TOPIC> element() <style> function
element()

string element( int number, string delimiter, string str)

<b>Description

Extracts one element from a string of elements.
Returns the extracted element.

<b>Arguments

int		<t>number	<t>the number of the element.
string		<t>delimiter	<t>delimiter character.
string		<t>str		<t>string of elements.

<b>Example

<c>  string str = "mary, lisa, anna, john";
<c>  string elem1;
<c>  elem1 = element( 1, ",", str);
</TOPIC>

<TOPIC> extract() <style> function
extract()

string extract( int start, int length, string str)

<b>Description

Extracts the specified characters from the specified string.
Returns the extracted characters as a string.

<b>Arguments

int		<t>start	<t>start position of the first character.
				<t><t>First character has position 1.
int		<t>length	<t>number of characters to be extracted.
string		<t>str		<t>string from which characters should be extracted.

<b>Example

<c>  extracted_str = extract( 5, 7, str);
</TOPIC>

<TOPIC> sprintf() <style> function
sprintf()

int sprintf( string str, string format [, (arbitrary type) arg1, (arbitrary type) arg2])

<b>Description

Formatted print to buffer. C-syntax. Format argument and non, one or two value arguments.
Returns number of printed characters.

<b>Arguments

string 			<t>str		<t>String to print to.
string 			<t>format	<t>Format.
arbitrary type		<t>arg1		<t>Value argument. Optional. Can be int,
			<t>		<t>float or string.
arbitrary type		<t>arg2		<t>Value argument. Optional. Can be int,
			<t>		<t>float or string.

<b>Example

<c>  string str;
<c>  int items;

<c>  sprintf( str, "Number of items: %d", items);
</TOPIC>

<TOPIC> strchr() <style> function
strchr()

int strchr( string str, string c)

<b>Description

Return the first occurence of a character in a string.

<b>Arguments

string		<t>str		<t>String to search in.
string		<t>c		<t>Character to search for.

<b>Returns
int				<t><t>Index for first occurence of character.
				<t><t>First character has index 1. Returns
				<t><t>zero if the character is not found.
<b>Example

<c>  string str = "index.html";
<c>  int idx;

<c>  idx = strchr( str, ".");
</TOPIC>

<TOPIC> strrchr() <style> function
strrchr()

int strrchr( string str, string c)

<b>Description

Return the last occurence of a character in a string.

<b>Arguments

string		<t>str		<t>String to search in.
string		<t>c		<t>Character to search for.

<b>Returns
int				<t><t>Index for last occurence of character.
				<t><t>First character has index 1. Returns
				<t><t>zero if the character is not found.
<b>Example

<c>  string str = "/usr/local/pwrrt";
<c>  int idx;

<c>  idx = strrchr( str, "/");
</TOPIC>

<TOPIC> strlen() <style> function
strlen()

int strlen( string str, string c)

<b>Description

Calculates the length of a string.

<b>Arguments

string		<t>str		<t>String to calculate length for.

<b>Returns
int				<t><t>Length of string.

<b>Example

<c>  string str = "/usr/local/pwrrt";
<c>  int len;

<c>  len = strlen( str);
</TOPIC>

<TOPIC> strstr() <style> function
strchr()

int strstr( string str, string substr)

<b>Description

Return the first occurence of a substring in a string.

<b>Arguments

string		<t>str		<t>String to search in.
string		<t>substr	<t>Substring to search for.

<b>Returns
int				<t><t>Index for first occurence of substring.
				<t><t>First character has index 1. Returns
				<t><t>zero if the substring is not found.
<b>Example

<c>  string str = "index.html";
<c>  int idx;

<c>  idx = strstr( str, ".html");
</TOPIC>

<TOPIC> toupper() <style> function
toupper()

string toupper( string str)

<b>Description

Convert string to upper case.

<b>Arguments

string		<t>str		<t>String to convert.

<b>Returns
string				<t><t>String in upper case.

<b>Example

<c>  string str1 = "Buster Wilson";
<c>  string str2;
<c>  str2 = toupper( str);
</TOPIC>

<TOPIC> tolower() <style> function
tolower()

string tolower( string str)

<b>Description

Convert string to lower case.

<b>Arguments

string		<t>str		<t>string to convert.

<b>Returns
string				<t><t>string in lower case.

<b>Example

<c>  string str1 = "Buster Wilson";
<c>  string str2;
<c>  str2 = tolower( str);
</TOPIC>

</headerlevel>

<TOPIC> system_functions <style> function
System functions

<b>Function <t>Description
exit <t>Exit script. <link> exit()
system <t>Execute shell command. <link> system()
time <t>Get system time. <link> time()
verify <t>Print executed lines. <link> verify()
</TOPIC>

<headerlevel>
<TOPIC> exit() <style> function
exit()

int exit()

<b>Description

Terminates executions of the file.

<b>Example

<c>  exit();
</TOPIC>

<TOPIC> system() <style> function
system()

int system( string cmd)

<b>Description

Execute a shell command.

<b>Arguments

string		<t>cmd		<t>Shell command to execute.

<b>Returns
int				<t><t>The return value is -1 on error and the
				<t><t>return status of the command otherwise.

<b>Example

<c>  string cmd;

<c>  cmd = "firefox http://www.proview.se";
<c>  system( cmd);
</TOPIC>

<TOPIC> time() <style> function
time()

string time()

<b>Description

Returns the current time in string format.

<b>Example

<c>  string t;
<c>  t = time();
</TOPIC>

<TOPIC> verify() <style> function
verify()

int verify( [int mode])

<b>Description

Sets or shows verification mode. If verification is on all executed lines will
be displayed on the screen.
Returns the current verification mode.

<b>Arguments

int		<t>mode		<t>verification on (1) or off (0). Optional.

<b>Example

<c>  verify(1);
</TOPIC>
</headerlevel>

<TOPIC> database_functions <style> function
Database functions

<b>Function <t>Description
GetAttribute()	<t>Get attribute value. <LINK> getattribute()
GetChild()	<t>Get object child.	<LINK> getchild()
GetParent()	<t>Get object parent.	<LINK> getparent()
GetNextSibling()<t>Get object sibling.	<LINK> getnextsibling()
GetClassList()	<t>Get first instance of a class. <LINK> getclasslist()
GetNextObject()	<t>Get next instance of a class. <LINK> getnextobject()
GetObjectClass() <t>Get class of an object. <LINK> getobjectclass()
GetNodeObject()	<t>Get node object.	<LINK> getnodeobject()
GetRootList()	<t>Get first object in root list. <LINK> getrootlist()
</TOPIC>

<headerlevel>
<TOPIC> getattribute() <style> function
GetAttribute()

(variable type) GetAttribute( string name [, int status])

<b>Description

Get the value of the specified attribute. The returned type is dependent
of the attribute type. The attribute will be converted to int, float or string.

<b>Arguments

string		<t>name		<t>name of the attribute to be fetched.
int		<t>status	<t>status of operation. Returned. If zero, the
		<t>		<t>attribute could not be fetched. Optional.

<b>Example

<c>  int alarm;
<c>  int sts;

<c>  alarm = GetAttribute("Roller-Motor-Alarm.ActualValue");
<c>  on = GetAttribute("Roller-Motor-On.ActualValue", sts);
<c>  if ( !sts)
<c>    say("Could not find motor on attribute!");
</TOPIC>

<TOPIC> getchild() <style> function
GetChild()

string GetChild( string name)

<b>Description

get the first child of an object. The next children can be fetched with
GetNextSibling().
Returns the name of the child. If no child exists a null-string is returned

<b>Arguments

string		<t>name		<t>name of object.

<b>Example

<c>  string child;

<c>  child = GetChild("Roller-Motor");
</TOPIC>

<TOPIC> getparent() <style> function
GetParent()

string GetParent( string name)

<b>Description

Get the parent of an object.
Returns the name of the child. If no parent exists a null-string is returned.

<b>Arguments

string		<t>name		<t>name of object.

<b>Example

<c>  string parent;

<c>  parent = GetChild("Roller-Motor");
</TOPIC>

<TOPIC> getnextsibling() <style> function
GetNextSibling()

string GetNextSibling( string name)

<b>Description

Get the next sibling of an object.
Returns the name of the sibling. If no next sibling exists a null-string is
returned.

<b>Arguments

string		<t>name		<t>name of object.

<b>Example

<c> string name;
<c> int not_first;

<c> name = GetChild("Rt");
<c> not_first = 0;
<c> while ( name != "")
<c>   if ( !not_first)
<c>     create menu/title="The Rt objects"/text="'name'"/object="'name'"
<c>   else
<c>     add menu/text="'name'"/object="'name'"
<c>   endif
<c>   not_first = 1;
<c>   name = GetNextSibling(nname);
<c> endwhile
<c> if ( !not_first )
<c>   MessageError("No objects found");
</TOPIC>

<TOPIC> getclasslist() <style> function
GetClassList()

string GetClassList( string class)

<b>Description

Get the first object of a specified class. The next object of the class
can be fetched whith GetNextObject().
Returns the name of the first object. If no instances of the class exist, 
a null-string is returned.

<b>Arguments

string		<t>name		<t>name of class.

<b>Example

<c>  string name;

<c>  name = GetClassList("Dv");
</TOPIC>

<TOPIC> getnextobject() <style> function
GetNextObject()

string GetNextObject( string name)

<b>Description

Get the next object in a classlist.
Returns the name of the object. If no next object exists, a null-string is
returned.

<b>Arguments

string		<t>name		<t>name of object.

<b>Example

<c>  string name;

<c>  name = GetClassList("Di");
<c>  while ( name != "")
<c>    printf("Di object found: %s", name);
<c>    name = GetNextObject(name);
<c>  endwhile
</TOPIC>

<TOPIC> getobjectclass() <style> function
GetObjectClass()

string GetObjectClass( string name)

<b>Description

Get the class of an object.
Returns the name of the class.

<b>Arguments

string		<t>name		<t>name of object.

<b>Example

<c>  string class;

<c>  class = GetObjectClass("Motor-Enable");
</TOPIC>

<TOPIC> getnodeobject() <style> function
GetNodeObject()

string GetNodeObject()

<b>Description

Get the node object.
Returns the name of the node object.

<b>Example

<c>  string node;
<c>  node = GetNodeObject();
</TOPIC>

<TOPIC> getrootlist() <style> function
GetRootList()

string GetRootList()

<b>Description

Get the first object in the root list.
Returns the name of the root object. The next object in the root list can be
fetched with GetNextSibling().

<b>Example

<c>  string name;

<c>  name = GetRootList();
<c>  while( name != "")
<c>    printf( "Root object found: %s", name);
<c>    name = GetNextSibling(name);
<c>  endwhile
</TOPIC>
</headerlevel>

<TOPIC> misc_functions <style> function
Miscellaneous functions

<b>Function <t>Description
CutObjectName()	<t>Cut off an object name. <LINK> cutobjectname()
ConfirmDialog()	<t>Open a confirm dialog <LINK> confirmdialog()
MessageError()	<t>Print error message.	<LINK> messageerror()
MessageInfo()	<t>Print info message.	<LINK> messageinfo()
GetCurrentText() <t>Get selected text.	<LINK> getcurrenttext()
GetCurrentObject() <t>Get selected object. <LINK> getcurrentobject()
pwr_get_config() <t>Get configuration values <LINK> pwr_get_config()
get_node_name() <t>Get node name <LINK> get_node_name()
get_language()	<t>Get the current language <LINK> get_language()
</TOPIC>

<headerlevel>
<TOPIC> cutobjectname() <style> function
CutObjectName()

string CutObjectName( string name, int segments)

<b>Description

Cut the first segments of an object name.
Returns the last segments of an object name. The number of segments left is
specified by the second argument

<b>Arguments

string		<t>name		<t>Path name of object.
int		<t>segments	<t>Number of segments that should be left.

<b>Example

<c>  string path_name;
<c>  string object_name;

<c>  path_name = GetChild("Rt-Motor");
<c>  object_name = CutObjectName( path_name, 1);
</TOPIC>

<TOPIC> confirmdialog() <style> function
ConfirmDialog()

int ConfirmDialog( string title, string text)

<b>Description

Display a confirm dialog box.
Returns 1 if the yes-button is pressed, 0 if the no-button i pressed. 

<b>Arguments

string		<t>title	<t>Title.
string		<t>text		<t>Confirm text.

<b>Example

<c>  if ( ! ConfirmDialog( "Confirm", "Do you really want to..."))
<c>    printf( "Yes is pressed\n");
<c>  else
<c>    printf( "No is pressed\n");
<c>  endif

</TOPIC>

<TOPIC> messageerror() <style> function
MessageError()

string MessageError( string message)

<b>Description

Print an rtt error message on the screen.

<b>Example

<c>  MessageError("Something went wrong");
</TOPIC>

<TOPIC> messageinfo() <style> function
MessageInfo()

string MessageInfo( string message)

<b>Description

Print an rtt info message on the screen.

<b>Example

<c>  MessageInfo("Everything is all right so far");
</TOPIC>

<TOPIC> getcurrenttext() <style> function
GetCurrentText()

string GetCurrentText()

<b>Description

Get the text of the current menu item or update field.

<b>Example

<c>  string text;

<c>  text = GetCurrentText();
</TOPIC>

<TOPIC> getcurrentobject() <style> function
GetCurrentObject()

string GetCurrentObject()

<b>Description

Get the object associated with the current menu item.
If no object is associated, a null-string i returned.

<b>Example

<c>  string object;

<c>  object = GetCurrentObject();
</TOPIC>

<TOPIC> get_language() <style> function
get_language()

string get_language()

<b>Description

Get the current language.

<b>Returns
string				<t><t>The current langage, e.g en_us, sv_se, de_de.

<b>Example

<c>  string lng;

<c>  lng = get_language();
<c>  if ( lng == "sv_se")
<c>    create opmenu/name="Funktioner-Bilder-versikt"/command="open graph overview"
<c>  endif
<c>  if ( lng == "en_us")
<c>    create opmenu/name="Functions-ProcessGraphs-Overview"/command="open graph overview"
<c>  endif
</TOPIC>
</headerlevel>

<TOPIC> xtt-commands <style> function
Xtt commands

All the xtt-commands is available in the script code. An rtt-command line
should NOT be ended with a semicolon. Variables can be substituted in the
command line by surrounding them with apostrophes.

<b>Example

<c>  string name = "PUMP-VALVE-Open.ActualValue";
<c>  float  value = 2.2;
<c>  set parameter/name='name'/value='value'

<b>Example

<c>  string name;
<c>  string parname;
<c>  int j;
<c>  int i;
<c>  for ( i = 0; i < 3; i++)
<c>    parname = "vkv-test-obj" + (i+1);
<c>    create obj/name='parname'
<c>    for ( j = 0; j < 3; j++)
<c>      name = parname + "-obj" + (j+1);
<c>      create obj/name='name'
<c>    endfor
<c>  endfor
</TOPIC>

</chapter>

