ARG RELEASE=debian:10
FROM $RELEASE
ARG INSTALL_UPDATE
ARG INSTALL_PWR
ARG INSTALL_PKG
ARG INSTALL_VIDEODUMMY
ARG PKG_PWR
ARG TZ

ENV DISPLAY :1
ENV DEBIAN_FRONTEND none_interactive

ENV TZ=$TZ
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone
COPY ./pkg/$PKG_PWR ./dummy_display_xorg.conf ./

RUN $INSTALL_UPDATE
RUN $INSTALL_PWR
RUN $INSTALL_VIDEODUMMY
RUN $INSTALL_PKG $PKG_PWR
